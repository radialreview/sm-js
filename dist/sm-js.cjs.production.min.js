"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("lodash"),r=require("@apollo/client/core"),n=e(require("chance")),o=require("mobx"),i=e(require("react")),a=require("@apollo/client/link/ws"),u=require("@apollo/client/link/http"),s=require("@apollo/client/link/batch-http"),c=require("@apollo/client/utilities"),l=require("apollo-link-multipart"),d=require("@apollo/client");function p(e,t,r,n,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){p(i,n,o,a,u,"next",e)}function u(e){p(i,n,o,a,u,"throw",e)}a(void 0)}))}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e,t,r){return(b=m()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&v(o,r.prototype),o}).apply(null,arguments)}function E(e){var t="function"==typeof Map?new Map:void 0;return(E=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return b(e,arguments,g(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)})(e)}function S(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(o[r]=e[r]);return o}function R(e,t){return t||(t=e.slice(0)),e.raw=t,e}var P,x,O,I,D,q,w,_=function(e){function t(t){var r;return(r=e.call(this,'NotUpToDate exception - The property "'+t.propName+'" on the DO for the node type '+t.nodeType+" was read but is not guaranteed to be up to date. Add that property to the query with the id "+t.queryId)||this).propName=void 0,r.propName=t.propName,r}return h(t,e),t}(E(Error)),N=function(e){function t(t){return e.call(this,'NotUpToDateInComputed exception - The property "'+t.propName+'" on the DO for the node type "'+t.nodeType+'" was read for the computed property "'+t.computedPropName+'" but is not guaranteed to be up to date. Add that property to the query with the id '+t.queryId)||this}return h(t,e),t}(E(Error)),A=function(e){function t(t){return e.call(this,"FilterPropertyNotDefinedInQueryException exception - The filter property '"+t.filterPropName+"' is not defined in the 'map' function of the queryDefinition. Add that property to the queryDefinition 'map' function.")||this}return h(t,e),t}(E(Error)),k=function(e){function t(t){return e.call(this,"SortPropertyNotDefinedInQueryException exception - The sort property '"+t.sortPropName+"' is not defined in the 'map' function of the queryDefinition. Add that property to the queryDefinition 'map' function.")||this}return h(t,e),t}(E(Error)),T=function(e){function t(t){return e.call(this,'ImpliedPropertyException exception - The property "'+t.propName+'" is implied and cannot be customized within a node definition.')||this}return h(t,e),t}(E(Error)),j=function(e){function t(t){return e.call(this,'NotCached exception - Attempted to get the node with the type "'+t.nodeType+'" and id "'+t.id+'" but it was not cached.')||this}return h(t,e),t}(E(Error)),Q=function(e){function t(t){return e.call(this,"NodesCollectionPageOutOfBoundsException - "+t)||this}return h(t,e),t}(E(Error)),C=function(e){function t(t){return e.call(this,"DataType exception - the data type "+t.dataType+' received a bad value. Value: "'+t.value+'"')||this}return h(t,e),t}(E(Error)),F=function(e){function t(t){return e.call(this,"DataTypeExplicitDefaultException - the data type "+t.dataType+" requires setting an explicit default value for non-optional properties")||this}return h(t,e),t}(E(Error)),L=function(e){function t(t){return e.call(this,"DataParsing exception - "+t.message+"\nData: "+JSON.stringify(t.receivedData,null,2)+".")||this}return h(t,e),t}(E(Error)),M=function(e){function t(t){return e.call(this,"FilterOperatorNotImplementedException - '"+t.operator+"' operator not implemented.")||this}return h(t,e),t}(E(Error)),U=function(e){function t(t){return e.call(this,"Unreachable case: "+("object"==typeof t?JSON.stringify(t,null,2):t))||this}return h(t,e),t}(E(Error));(P=exports.QueryState||(exports.QueryState={})).IDLE="IDLE",P.LOADING="LOADING",P.ERROR="ERROR",(x=exports.EPaginationFilteringSortingInstance||(exports.EPaginationFilteringSortingInstance={}))[x.SERVER=0]="SERVER",x[x.CLIENT=1]="CLIENT",(O=exports.DATA_TYPES||(exports.DATA_TYPES={})).string="s",O.maybeString="mS",O.stringEnum="sE",O.maybeStringEnum="mSE",O.number="n",O.maybeNumber="mN",O.boolean="b",O.maybeBoolean="mB",O.object="o",O.maybeObject="mO",O.record="r",O.maybeRecord="mR",O.array="a",O.maybeArray="mA",(I=exports.RELATIONAL_TYPES||(exports.RELATIONAL_TYPES={})).oneToOne="oTO",I.oneToMany="otM",(D=exports.EStringFilterOperator||(exports.EStringFilterOperator={})).eq="eq",D.neq="neq",D.contains="contains",D.ncontains="ncontains",D.startsWith="startsWith",D.nstartsWith="nstartsWith",D.endsWith="endsWith",D.nendsWith="nendsWith",(q=exports.ENumberFilterOperator||(exports.ENumberFilterOperator={})).eq="eq",q.neq="neq",q.gt="gt",q.ngt="ngt",q.gte="gte",q.ngte="ngte",q.lt="lt",q.nlt="nlt",q.lte="lte",q.nlte="nlte",(w=exports.EBooleanFilterOperator||(exports.EBooleanFilterOperator={})).eq="eq",w.neq="neq";var B=function(e){var t;this.type=void 0,this.parser=void 0,this.boxedValue=void 0,this.defaultValue=void 0,this.isOptional=void 0,this.acceptableValues=void 0,this.type=e.type,this.parser=e.parser,this.boxedValue=e.boxedValue,this.defaultValue=null!=(t=e.defaultValue)?t:null,this.isOptional=e.isOptional,this.acceptableValues=e.acceptableValues},V=function(e){return new B({type:exports.DATA_TYPES.string,parser:function(e){return null!=e?String(e):e},defaultValue:e,isOptional:!1})};V._default=V(""),V.optional=new B({type:exports.DATA_TYPES.maybeString,parser:function(e){return null!=e?String(e):e},isOptional:!0});var G=function(e){return new B({type:exports.DATA_TYPES.stringEnum,parser:function(e){return null!=e?String(e):e},defaultValue:e[0],isOptional:!1,acceptableValues:e})};G.optional=function(e){return new B({type:exports.DATA_TYPES.maybeStringEnum,parser:function(e){return null!=e?String(e):null},defaultValue:e[0],isOptional:!0,acceptableValues:e})};var Y=function e(t){return new B({type:exports.DATA_TYPES.number,parser:function(t){var r=Number(t);return isNaN(r)?(function(e){var t,r;if("production"!==(null==(t=process)||null==(r=t.env)?void 0:r.NODE_ENV))throw e;console.error(e)}(new C({dataType:exports.DATA_TYPES.number,value:t})),e._default.defaultValue):r},defaultValue:t,isOptional:!1})};Y._default=Y(0),Y.optional=new B({type:exports.DATA_TYPES.maybeNumber,parser:function(e){return null!=e?Number(e):e},isOptional:!0});var K=function(e){return void 0===e?new F({dataType:exports.DATA_TYPES.boolean}):new B({type:exports.DATA_TYPES.boolean,parser:function(e){if("true"===e||!0===e)return!0;if("false"===e||!1===e)return!1;throw new C({dataType:exports.DATA_TYPES.boolean,value:e})},defaultValue:e,isOptional:!1})};K._default=K(),K.optional=new B({type:exports.DATA_TYPES.maybeBoolean,parser:function(e){return null==e?e:"true"===e||!0===e},isOptional:!0});var W=function(e){return new B({type:exports.DATA_TYPES.object,parser:function(e){return e},boxedValue:e,isOptional:!1})};W._default=null,W.optional=function(e){return new B({type:exports.DATA_TYPES.maybeObject,parser:function(e){return e},boxedValue:e,isOptional:!0})};var J=function(e){return new B({type:exports.DATA_TYPES.record,parser:function(e){return e},boxedValue:e,isOptional:!1,defaultValue:{}})};J.optional=function(e){return new B({type:exports.DATA_TYPES.maybeRecord,parser:function(e){return e},boxedValue:"function"==typeof e?e._default:e,isOptional:!0,defaultValue:null})},J._default=null;var z={id:V,version:Y,lastUpdatedBy:V,type:V},H=y({},S(z,["type"]),{dateCreated:Y,dateLastModified:Y,lastUpdatedClientTimestamp:Y});function $(e){if(!e.startsWith("__JSON__"))throw Error("parseJSONFromBE - invalid json received:\n"+e);return e.startsWith("__JSON__[")?JSON.parse(e.replace("__JSON__","")):JSON.parse(e.replace("__JSON__","").replace(/\n/g,"\\n"))}function X(e){return"__NULL__"===e?null:"true"===e||"false"===e?"true"===e:"string"==typeof e&&e.startsWith("__JSON__")?$(e):Array.isArray(e)?e.map((function(e){return"object"==typeof e?X(e):e})):null!=e&&"object"==typeof e?(t=e,Object.keys(t).reduce((function(e,r){var n;return y({},e,((n={})[r]=X(t[r]),n))}),{})):e;var t}function Z(e){if("object"!=typeof e||null==e)return e;if(Array.isArray(e)){var t=[];return e.forEach((function(e){return t.push(Z(e))})),t}var r={};for(var n in e)r[n]=Z(e[n]);return r}function ee(e){var t=[];Object.keys(e.object).forEach((function(r){var n=e.extension[r];if(void 0===n){if(!e.deleteKeysNotInExtension)return;null!=e.object[r]&&"object"==typeof e.object[r]?function e(t){Object.keys(t.object).forEach((function(r){"object"==typeof t.object[r]?e({object:t.object[r]}):delete t.object[r]}))}({object:e.object[r]}):delete e.object[r]}else t.push(r),null==n||"object"!=typeof n||Array.isArray(n)?e.object[r]=n:e.extendNestedObjects?(e.object[r]=e.object[r]||{},ee({object:e.object[r]||{},extension:n,deleteKeysNotInExtension:e.deleteKeysNotInExtension,extendNestedObjects:!0})):e.object[r]=n})),Object.keys(e.extension).filter((function(e){return!t.includes(e)})).forEach((function(t){var r=e.extension[t];null==r||"object"!=typeof r||Array.isArray(r)?e.object[t]=r:e.extendNestedObjects?(e.object[t]=e.object[t]||{},ee({object:e.object[t],extension:r,deleteKeysNotInExtension:e.deleteKeysNotInExtension,extendNestedObjects:!0})):e.object[t]=r}))}var te,re=function(){function e(){var e=this;this.DOsById={},this.lastKnownPersistedDataById={},this.inFlightRequestsById={},this.onDOConstructed=function(t){if(!t.id)throw Error("No id found in DO");e.DOsById[t.id]=t},this.onDODeleted=function(t){if(!t.id)throw Error("No id found in DO");delete e.DOsById[t.id],delete e.lastKnownPersistedDataById[t.id]},this.onPersistedDataReceived=function(t){var r=t.data.id;e.inFlightRequestsById[r]?e.lastKnownPersistedDataById[r]=t.data:t.applyUpdateToDO()},this.onUpdateRequested=function(t){var r=e.getDOById(t.id);if(!r)return{onUpdateSuccessful:function(){},onUpdateFailed:function(){}};var n=y({},Z(r.persistedData),{version:r.version,lastUpdatedBy:r.lastUpdatedBy});e.inFlightRequestsById[t.id]?e.inFlightRequestsById[t.id].push({rollbackState:n}):(e.lastKnownPersistedDataById[t.id]=n,e.inFlightRequestsById[t.id]=[{rollbackState:n}]);var o=e.inFlightRequestsById[t.id].length-1,i=Number(r.version);return r.onDataReceived(y({},t.payload,{version:i+1})),{onUpdateFailed:function(){e.handleUpdateFailed({updateIdx:o,id:t.id})},onUpdateSuccessful:function(){e.handleUpdateSuccessful({updateIdx:o,id:t.id})}}}}var t=e.prototype;return t.handleUpdateFailed=function(e){var t=this.inFlightRequestsById[e.id];if(t.length===e.updateIdx+1){var r=this.getDOById(e.id);if(!r)return;t.length>1?r.onDataReceived(t[t.length-1].rollbackState,{__unsafeIgnoreVersion:!0}):(r.onDataReceived(this.lastKnownPersistedDataById[e.id],{__unsafeIgnoreVersion:!0}),t.splice(e.updateIdx,1))}t.splice(e.updateIdx,1),this.cleanupIfNoInFlightRequests(e.id)},t.handleUpdateSuccessful=function(e){this.inFlightRequestsById[e.id].splice(e.updateIdx,1),this.cleanupIfNoInFlightRequests(e.id)},t.getDOById=function(e){return this.DOsById[e]},t.cleanupIfNoInFlightRequests=function(e){this.inFlightRequestsById[e].length||(delete this.lastKnownPersistedDataById[e],delete this.inFlightRequestsById[e])},e}(),ne=(function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=Object.create((t&&t.prototype instanceof d?t:d).prototype),i=new P(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===l)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,i),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function d(){}function p(){}function f(){}var y={};u(y,o,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(x([])));g&&g!==t&&r.call(g,o)&&(y=g);var v=f.prototype=d.prototype=Object.create(y);function m(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t((function(n,a){!function n(o,i,a,u){var s=c(e[o],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(s.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=f,u(v,"constructor",f),u(f,"constructor",p),p.displayName=u(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(b.prototype),u(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(v),u(v,a,"Generator"),u(v,o,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(te={exports:{}}),te.exports),oe=0,ie=function(){function e(e){this.onLoadMoreResults=void 0,this.onGoToNextPage=void 0,this.onGoToPreviousPage=void 0,this.onPaginationRequestStateChanged=void 0,this.items=void 0,this.pageInfoFromResults=void 0,this.clientSidePageInfo=void 0,this.useServerSidePaginationFilteringSorting=void 0,this.pagesBeingDisplayed=void 0,this.loadingState=exports.QueryState.IDLE,this.loadingError=null,this.items=e.items,this.pageInfoFromResults=e.pageInfoFromResults,this.clientSidePageInfo=e.clientSidePageInfo,this.useServerSidePaginationFilteringSorting=e.useServerSidePaginationFilteringSorting,this.pagesBeingDisplayed=[e.clientSidePageInfo.lastQueriedPage],this.onLoadMoreResults=e.onLoadMoreResults,this.onGoToNextPage=e.onGoToNextPage,this.onGoToPreviousPage=e.onGoToPreviousPage,this.onPaginationRequestStateChanged=e.onPaginationRequestStateChanged}var t,r=e.prototype;return r.loadMore=function(){var e=f(ne.mark((function e(){var t=this;return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasNextPage){e.next=2;break}throw new Q("No more results available - check results.hasNextPage before calling loadMore");case 2:return e.next=4,this.withPaginationEventLoadingState(f(ne.mark((function e(){return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onLoadMoreResults();case 2:t.clientSidePageInfo.lastQueriedPage++,t.pagesBeingDisplayed=[].concat(t.pagesBeingDisplayed,[t.clientSidePageInfo.lastQueriedPage]);case 4:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.goToNextPage=function(){var e=f(ne.mark((function e(){var t=this;return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasNextPage){e.next=2;break}throw new Q("No next page available - check results.hasNextPage before calling goToNextPage");case 2:return e.next=4,this.withPaginationEventLoadingState(f(ne.mark((function e(){return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onGoToNextPage();case 2:t.clientSidePageInfo.lastQueriedPage++,t.pagesBeingDisplayed=[t.clientSidePageInfo.lastQueriedPage];case 4:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.goToPreviousPage=function(){var e=f(ne.mark((function e(){var t=this;return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasPreviousPage){e.next=2;break}throw new Q("No previous page available - check results.hasPreviousPage before calling goToPreviousPage");case 2:return e.next=4,this.withPaginationEventLoadingState(f(ne.mark((function e(){return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onGoToPreviousPage();case 2:t.clientSidePageInfo.lastQueriedPage--,t.pagesBeingDisplayed=[t.clientSidePageInfo.lastQueriedPage];case 4:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.withPaginationEventLoadingState=function(){var e=f(ne.mark((function e(t){return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingState=exports.QueryState.LOADING,this.loadingError=null,e.prev=2,this.onPaginationRequestStateChanged(),e.next=6,t();case 6:this.loadingState=exports.QueryState.IDLE,e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(2),this.loadingState=exports.QueryState.ERROR,this.loadingError=e.t0,e.t0;case 14:return e.prev=14,this.useServerSidePaginationFilteringSorting||this.setNewClientSidePageInfoAfterClientSidePaginationRequest(),this.onPaginationRequestStateChanged(),e.finish(14);case 18:case"end":return e.stop()}}),e,this,[[2,9,14,18]])})));return function(t){return e.apply(this,arguments)}}(),r.goToPage=function(){var e=f(ne.mark((function e(t){return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.setNewClientSidePageInfoAfterClientSidePaginationRequest=function(){this.pageInfoFromResults={totalCount:this.pageInfoFromResults.totalCount,totalPages:this.pageInfoFromResults.totalPages,hasNextPage:this.pageInfoFromResults.totalPages>this.clientSidePageInfo.lastQueriedPage,hasPreviousPage:this.clientSidePageInfo.lastQueriedPage>1,endCursor:this.pageInfoFromResults.endCursor,startCursor:this.pageInfoFromResults.startCursor}},(t=[{key:"nodes",get:function(){return this.useServerSidePaginationFilteringSorting?this.items:(t=ae((e={items:this.items,pages:this.pagesBeingDisplayed,itemsPerPage:this.clientSidePageInfo.pageSize}).items,e.itemsPerPage),e.pages.map((function(e){return t[e-1]})).flat());var e,t}},{key:"hasNextPage",get:function(){return this.pageInfoFromResults.hasNextPage}},{key:"hasPreviousPage",get:function(){return this.pageInfoFromResults.hasPreviousPage}},{key:"totalPages",get:function(){return this.pageInfoFromResults.totalPages}},{key:"totalCount",get:function(){return this.pageInfoFromResults.totalCount}},{key:"page",get:function(){return this.clientSidePageInfo.lastQueriedPage}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}(),ae=function e(t,r){return t.length>r?[t.slice(0,r)].concat(e(t.slice(r),r)):[t]},ue=["condition"];function se(e){var t,r=y({},e.properties,(t=e.relational)?Object.keys(t).reduce((function(e,r){var n=t[r]();return e[r]=function(e){return y({},n(e),{_relationshipName:r})},e}),{}):{});return Object.keys(e.properties).forEach((function(t){var n=e.properties[t];n.type!==exports.DATA_TYPES.object&&n.type!==exports.DATA_TYPES.maybeObject||(r[t]=function(e){return e.map})})),e.mapFn(r)}function ce(e){var t=se({mapFn:e.mapFn,properties:e.data,relational:e.relational});return Object.keys(t||e.data).reduce((function(r,n){if(!e.data[n])return r;if(e.isRootLevel&&Object.keys(z).includes(n))return r;var o=e.data[n];return o.type===exports.DATA_TYPES.object||o.type===exports.DATA_TYPES.maybeObject?(r.push(n),r.push.apply(r,ce({queryId:e.queryId,mapFn:t&&"function"==typeof t[n]?t[n]:function(){return null},data:o.boxedValue}).map((function(e){return n+"__dot__"+e}))),r):[].concat(r,[n])}),e.isRootLevel?[].concat(Object.keys(z)):[])}function le(e){return Object.keys(e.nodeProperties).reduce((function(t,r){if(e.isRootLevel&&Object.keys(z).includes(r))return t;var n=e.nodeProperties[r];return n.type===exports.DATA_TYPES.object||n.type===exports.DATA_TYPES.maybeObject?(t.push(r),t.push.apply(t,le({nodeProperties:e.nodeProperties[r].boxedValue,isRootLevel:!1}).map((function(e){return r+"__dot__"+e}))),t):[].concat(t,[r])}),e.isRootLevel?[].concat(Object.keys(z)):[])}function de(e){var t={};return Object.keys(e.queryDefinitions).forEach((function(r){var n,o,i,a,u,s=e.queryDefinitions[r];if(s){var c;"_isNodeDef"in s?n=le({nodeProperties:(o=s).data,isRootLevel:!0}):(o=s.def,a=null==(c=s.target)?void 0:c.allowNullResult,u=s.tokenName,s.map?(n=ce({mapFn:s.map,queryId:e.queryId,data:s.def.data,computed:s.def.computed,relational:s.def.relational,isRootLevel:!0}),i=function e(t){var r=se({mapFn:t.mapFn,properties:t.data,relational:t.relational}),n=Object.keys(r).reduce((function(n,o){if(t.data[o]||t.computed&&t.computed[o])return n;var i=function(r){var o={def:r.def,_relationshipName:r._relationshipName,properties:ce({queryId:t.queryId,mapFn:r.mapFn,data:r.def.data,computed:r.def.computed,relational:r.def.relational,isRootLevel:!0})},i=e({queryId:t.queryId,mapFn:r.mapFn,data:r.def.data,computed:r.def.computed,relational:r.def.relational});i&&(o.relational=i);var u=r._relational;if(u===exports.RELATIONAL_TYPES.oneToOne)o.oneToOne=!0;else{if(u!==exports.RELATIONAL_TYPES.oneToMany)throw Error('relationalType "'+u+'" is not valid.');o.oneToMany=!0,a.queryBuilderOpts&&a.queryBuilderOpts.filter&&(o.filter=a.queryBuilderOpts.filter),a.queryBuilderOpts&&a.queryBuilderOpts.pagination&&(o.pagination=a.queryBuilderOpts.pagination),a.queryBuilderOpts&&a.queryBuilderOpts.sort&&(o.sort=a.queryBuilderOpts.sort)}n[r.alias]=o},a=r[o];if("function"==typeof a)return n;if(null==a._relational)throw Error('getRelationalQueries - the key "'+o+'" is not a data property, not a computed property and does not contain a relational query.');if(a._relational!==exports.RELATIONAL_TYPES.oneToOne&&a._relational!==exports.RELATIONAL_TYPES.oneToMany)throw Error("The relational query type "+a._relational+" is not valid");if("map"in a.queryBuilderOpts&&"function"==typeof a.queryBuilderOpts.map)i({_relational:a._relational,_relationshipName:a._relationshipName,alias:o,def:a.def,mapFn:a.queryBuilderOpts.map});else{var u=a.queryBuilderOpts;Object.keys(u).forEach((function(e){i({_relational:a._relational,_relationshipName:a._relationshipName,alias:o+"__rU__"+e,def:a.def[e],mapFn:u[e].map})}))}return n}),{});if(0!==Object.keys(n).length)return n}({mapFn:s.map,queryId:e.queryId,data:o.data,computed:o.computed,relational:o.relational})):n=le({nodeProperties:o.data,isRootLevel:!0}));var l={def:o,properties:n,relational:i,allowNullResult:a,tokenName:u};if("target"in s&&null!=s.target){if("ids"in s.target&&null!=s.target.ids){if(s.target.ids.some((function(e){return"string"!=typeof e})))throw Error("Invalid id in target.ids");l.ids=s.target.ids}if("id"in s.target){if("string"!=typeof s.target.id)throw Error("Invalid id in target.id");l.id=s.target.id}}"filter"in s&&null!=s.filter&&(l.filter=s.filter),"pagination"in s&&null!=s.pagination&&(l.pagination=s.pagination),"sort"in s&&null!=s.sort&&(l.sort=s.sort),t[r]=l}else t[r]=null})),t}function pe(e){if(!e.useServerSidePaginationFilteringSorting)return"";var t,r,n,o,i,a=[];return null!=e.queryRecordEntry.filter&&a.push("where: "+(t=e.queryRecordEntry.filter,0===(null==(r=(o=Object.keys(t).reduce((function(e,r){var n,o,i=r;if(null===t[i]||"string"==typeof t[i]||"number"==typeof t[i]||"boolean"==typeof t[i])o={key:i,operator:exports.EStringFilterOperator.eq,value:t[i]};else{var a=S(t[i],ue),u=Object.keys(a);if(1!==u.length)throw Error("Expected 1 property on this filter object");var s=u[0];o={key:i,operator:s,value:a[s]}}var c=(null==(n=t[i])?void 0:n.condition)||"and",l=e[c]||[];return l.push(o),e[c]=l,e}),{})).and)?void 0:r.length)&&delete o.and,0===(null==(n=o.or)?void 0:n.length)&&delete o.or,Object.entries(o).reduce((function(e,t,r){var n=t[0];r>0&&(e+=", ");var o=t[1].reduce((function(e,t,r){var n;return r>0&&(e+=", "),e+"{"+t.key+": {"+t.operator+": "+("string"==typeof(n=t.value)?'"'+n+'"':n)+"}}"}),"");return e+"{"+n+": ["+o+"]}"}),""))),null!=e.queryRecordEntry.sort&&a.push("order: ["+(i=e.queryRecordEntry.sort,Object.keys(i).reduce((function(e,t,r,n){var o,a,u=i[t];return"string"==typeof u?(a=n.length+r,o="asc"===u?"ASC":"DESC"):(a=null!=u.priority?u.priority:n.length+r,o="asc"===u.direction?"ASC":"DESC"),e[a]="{"+t+": "+o+"}",e}),[]).filter((function(e){return null!=e})).join(", ")+"]")),null!=e.queryRecordEntry.pagination&&(e.queryRecordEntry.pagination.endCursor&&a.push('before: "'+e.queryRecordEntry.pagination.endCursor+'"'),e.queryRecordEntry.pagination.startCursor&&a.push('after: "'+e.queryRecordEntry.pagination.startCursor+'"'),e.queryRecordEntry.pagination.itemsPerPage&&a.push((e.queryRecordEntry.pagination.endCursor?"last":"first")+": "+e.queryRecordEntry.pagination.itemsPerPage)),a.join(", ")}function fe(e){return new Array(e).fill(" ").join("")}function ye(e){var t=""+fe(2*e.nestLevel);return t+=e.queryRecordEntry.properties.join("\n"+fe(2*e.nestLevel)),e.queryRecordEntry.relational&&(t+=function(e){return Object.keys(e.relationalQueryRecord).reduce((function(t,r){var n,o=e.relationalQueryRecord[r];if(!o._relationshipName)throw Error("relationalQueryRecordEntry is invalid\n"+JSON.stringify(o,null,2));var i=""+o._relationshipName,a=pe({queryRecordEntry:o,useServerSidePaginationFilteringSorting:e.useServerSidePaginationFilteringSorting}),u=i+(""!==a?"("+a+")":"");return t+"\n"+fe(2*e.nestLevel)+r+": "+u+" {\n"+("oneToMany"in o?he({propertiesString:ye({queryRecordEntry:o,nestLevel:e.nestLevel+2,useServerSidePaginationFilteringSorting:e.useServerSidePaginationFilteringSorting}),nestLevel:e.nestLevel+1,includeTotalCount:(null==(n=o.pagination)?void 0:n.includeTotalCount)||!1}):ye({queryRecordEntry:o,nestLevel:e.nestLevel+1,useServerSidePaginationFilteringSorting:e.useServerSidePaginationFilteringSorting}))+"\n"+fe(2*e.nestLevel)+"}"}),"")}({relationalQueryRecord:e.queryRecordEntry.relational,nestLevel:e.nestLevel,useServerSidePaginationFilteringSorting:e.useServerSidePaginationFilteringSorting})),t}function he(e){var t=fe(2*e.nestLevel)+"}";return fe(2*e.nestLevel)+"nodes {\n"+e.propertiesString+"\n"+t+(e.includeTotalCount?"\n"+fe(2*e.nestLevel)+"totalCount":"")+"\n"+fe(2*e.nestLevel)+"pageInfo {\n"+["endCursor","startCursor","hasNextPage","hasPreviousPage"].map((function(t){return""+fe(2*(e.nestLevel+1))+t})).join("\n")+"\n"+t}function ge(e){if(!Object.values(e.queryRecord).some((function(e){return null!=e})))return null;var t=("query "+function(e){return e.queryId.replace(/-/g,"_")}({queryId:e.queryId})+" {\n"+Object.keys(e.queryRecord).map((function(t){var r=e.queryRecord[t];return r?function(e){var t,r=function(e){var t,r=e.def.type;if("ids"in e&&null!=e.ids)t=r+"s(ids: ["+e.ids.map((function(e){return'"'+e+'"'})).join(",")+"])";else if("id"in e&&null!=e.id)t=r+'(id: "'+e.id+'")';else{var n=pe({queryRecordEntry:e,useServerSidePaginationFilteringSorting:e.useServerSidePaginationFilteringSorting});t=r+"s"+(""!==n?"("+n+")":"")}return t}(e);return"  "+e.alias+": "+r+" {\n"+(null==e.id?he({propertiesString:ye({queryRecordEntry:e,nestLevel:3,useServerSidePaginationFilteringSorting:e.useServerSidePaginationFilteringSorting}),nestLevel:2,includeTotalCount:(null==(t=e.pagination)?void 0:t.includeTotalCount)||!1}):ye({queryRecordEntry:e,nestLevel:2,useServerSidePaginationFilteringSorting:e.useServerSidePaginationFilteringSorting}))+"\n  }"}(y({},r,{alias:t,useServerSidePaginationFilteringSorting:e.useServerSidePaginationFilteringSorting})):""})).join("\n    ")+"\n}").trim();return r.gql(t)}function ve(e){return e.queryRecordEntry&&(!("id"in e.queryRecordEntry)||null==e.queryRecordEntry.id)&&!("oneToOne"in e.queryRecordEntry)}var me=new n;function be(){return me.word()}function Ee(){return me.bool()}function Se(e,t){return me.integer({min:e,max:t})}function Re(){return me.guid()}var Pe=["to"],xe=["from"];function Oe(e){var t=e.skipBooleanStringWrapping,r=qe({obj:e.nodeData,IDataRecord:e.IDataRecord,generatingMockData:e.generatingMockData});return Object.entries(r).reduce((function(e,r,n){var o=r[0],i=r[1];return n>0&&(e+="\n"),"childNodes"===o||"additionalEdges"===o?e+(o+": [\n{\n")+i.join("\n}\n{\n")+"\n}\n]":e+(o+": ")+(null===i||("true"===i||"false"===i)&&t?i:'"'+i+'"')}),"")}function Ie(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")}function De(e){if(e.hasOwnProperty("to")){var t=e.to;return y({},S(e,Pe),{targetId:t})}if(e.hasOwnProperty("from"))return y({},S(e,xe),{sourceId:e.from});throw new Error("convertEdgeDirectionNames - received invalid data")}function qe(e){var t=e.IDataRecord,r=e.generatingMockData;return Object.entries(e.obj).reduce((function(e,n){var o=n[0],i=n[1],a="function"==typeof t[o]?t[o]._default:t[o];if("childNodes"===o){if(!Array.isArray(i))throw new Error('"childNodes" is supposed to be an array');return y({},e,{childNodes:i.map((function(e){return Oe({nodeData:e,IDataRecord:t,generatingMockData:r})}))})}if("additionalEdges"===o){if(!Array.isArray(i))throw new Error('"additionalEdges" is supposed to be an array');return y({},e,{additionalEdges:i.map((function(e){return Oe({nodeData:De(e),IDataRecord:t,generatingMockData:r,skipBooleanStringWrapping:!0})}))})}return y({},e,function e(t){var r,n,o,i,a,u,s,c=t.key,l=t.value,d=t.IDataRecordForKey,p=t.generatingMockData,f=t.omitObjectIdentifier;if(null===l)return(r={})[c]=null,r;if(Array.isArray(l))return(n={})[c]="__JSON__"+(p?JSON.stringify(l):Ie(JSON.stringify(l))),n;if("object"==typeof l)return d.type===exports.DATA_TYPES.record||d.type===exports.DATA_TYPES.maybeRecord?((o={})[c]="__JSON__"+(p?JSON.stringify(l):Ie(JSON.stringify(l))),o):function(t){var r=t.parentKey,n=t.omitObjectIdentifier;return Object.entries(t.obj).reduce((function(o,i){var a=i[0],u=i[1],s=r?r+"__dot__"+a:a;return"object"!=typeof u||null==u||Array.isArray(u)?o=y({},o,e(y({key:s,value:u},t))):(n||(o[s]="__object__"),o=y({},o,Object.entries(u).reduce((function(r,n){return y({},r,e(y({key:s+"__dot__"+n[0],value:n[1]},t)))}),{}))),o}),{})}({obj:(i={},i[c]=l,i),IDataRecordForKey:d,generatingMockData:p,omitObjectIdentifier:f});if("string"==typeof l)return(a={})[c]=Ie(l),a;if("boolean"==typeof l||"number"==typeof l)return"number"==typeof l&&isNaN(l)?((s={})[c]=null,s):((u={})[c]=String(l),u);throw Error("I don't yet know how to handle feData of type \""+typeof l+'"')}({key:o,value:i,IDataRecordForKey:a,generatingMockData:r}))}),{})}var we=["condition"];function _e(e){switch(e.type){case exports.DATA_TYPES.string:return be();case exports.DATA_TYPES.maybeString:return Te([be(),null]);case exports.DATA_TYPES.stringEnum:return Te(e.acceptableValues);case exports.DATA_TYPES.maybeStringEnum:return Te([Te(e.acceptableValues),null]);case exports.DATA_TYPES.number:return Se(1,100);case exports.DATA_TYPES.maybeNumber:return Te([Se(1,100),null]);case exports.DATA_TYPES.boolean:return Ee();case exports.DATA_TYPES.maybeBoolean:return Te([Ee(),null]);case exports.DATA_TYPES.object:return Ne(e.boxedValue);case exports.DATA_TYPES.maybeObject:return Te([Ne(e.boxedValue),null]);case exports.DATA_TYPES.array:return new Array(Se(1,10)).fill("").map((function(t){return _e("function"==typeof e.boxedValue?e.boxedValue._default:e.boxedValue)}));case exports.DATA_TYPES.maybeArray:return Te([new Array(Se(1,10)).fill("").map((function(t){return _e("function"==typeof e.boxedValue?e.boxedValue._default:e.boxedValue)})),null]);case exports.DATA_TYPES.record:var t;return(t={})[be()]=_e("function"==typeof e.boxedValue?e.boxedValue._default:e.boxedValue),t;case exports.DATA_TYPES.maybeRecord:var r;return Te([(r={},r[be()]=_e("function"==typeof e.boxedValue?e.boxedValue._default:e.boxedValue),r),null]);default:throw new U(e.type)}}function Ne(e){return Object.entries(e).reduce((function(e,t){var r=t[1];return e[t[0]]=_e("function"==typeof r?r._default:r),e}),{})}function Ae(e){var t=e.queryRecordEntry,r=Object.keys(t.def.data).filter((function(e){return t.properties.includes(e)})).reduce((function(e,r){return e[r]=t.def.data[r],e}),{}),n=y({},Ne(r),{type:e.queryRecordEntry.def.type,id:Re(),version:"1"});if(t.def.generateMockData){var o=t.def.generateMockData();ee({object:n,extension:Object.keys(o).reduce((function(e,r){return t.properties.includes(r)&&(e[r]=o[r]),e}),{}),extendNestedObjects:!0,deleteKeysNotInExtension:!1})}return t.filter&&ee({object:n,extension:function e(t){var r=t.data,n={};return Object.entries(t.filter).forEach((function(t){var o=t[0],i=t[1],a=null!=r[o]?"function"==typeof r[o]?r[o]._default:r[o]:null,u=a?a.type:null;if(a)if(null!==i&&"object"==typeof i){if(u===exports.DATA_TYPES.object||u===exports.DATA_TYPES.maybeObject)return void(n[o]=e({filter:i,data:a.boxedValue}));var s=S(i,we);if(1!==Object.keys(s).length)throw Error("Unexpected keys in filter "+JSON.stringify(s));var c=Object.keys(s)[0],l=s[c];switch(c){case"eq":n[o]=l;break;case"neq":var d=!1;do{var p=_e(a);p!==l&&(d=!0,n[o]=p)}while(!d);break;case"gt":case"nlte":n[o]=l+Se(1,1e3);break;case"ngt":case"lte":n[o]=l-Se(0,l>0?l:1e3);break;case"gte":case"nlt":n[o]=l+Se(0,1e3);break;case"ngte":case"lt":n[o]=l-Se(1,l>0?l:1e3);break;case"contains":var f=!1;do{var y=_e(a);if(null!=y&&"string"==typeof y){if(y.includes(l))n[o]=y;else{var h=Se(0,y.length-1);n[o]=""+y.slice(0,h)+l+y.slice(h)}f=!0}}while(!f);break;case"ncontains":var g=!1;do{var v=_e(a);(null==v||"string"==typeof v&&!v.includes(l))&&(g=!0,n[o]=v)}while(!g);break;case"startsWith":var m=_e(a);n[o]=l+m;break;case"nstartsWith":var b=!1;do{var E=_e(a);(null==E||"string"==typeof E&&!E.startsWith(l))&&(b=!0,n[o]=E)}while(!b);break;case"endsWith":var R=_e(a);n[o]=R+l;break;case"nendsWith":var P=!1;do{var x=_e(a);(null==x||"string"==typeof x&&!x.endsWith(l))&&(P=!0,n[o]=x)}while(!P)}}else void 0!==i&&(n[o]=i)})),n}({data:t.def.data,filter:t.filter}),extendNestedObjects:!0,deleteKeysNotInExtension:!1}),qe({obj:n,IDataRecord:r,generatingMockData:!0})}function ke(e){var t=e.queryRecord,r={};return Object.keys(t).forEach((function(e){var n=t[e];if(n){var o,i=ve({queryRecordEntry:n}),a=Object.entries(n.relational||{}).reduce((function(e,t){var r=t[0];return e[r]=Z(t[1]),n.filter&&Object.keys(n.filter).includes(r)&&(e[r].filter=y({},e[r].filter||{},Z(n.filter[r]))),e}),{});if(i){for(var u,s,c=(null==(u=n.pagination)?void 0:u.itemsPerPage)||10,l=Se(1,5*c),d=[],p=0;p<l;p++){var f=Ae({queryRecordEntry:n}),h=ke({queryRecord:a});d.push(y({},f,h))}var g={endCursor:"xyz",startCursor:"yzx",hasPreviousPage:!1,hasNextPage:c<d.length,totalPages:Math.ceil(d.length/c),totalCount:d.length};(s={}).nodes=d,s.totalCount=d.length,s.pageInfo=g,o=s}else{var v=Ae({queryRecordEntry:n});o=y({},v,ke({queryRecord:a}),{id:"id"in n?n.id:v.id})}r[e]=o}else r[e]=null})),r}function Te(e){return e[Math.floor(Math.random()*e.length)]}function je(e){var t=e.operator,r=e.itemValue,n=e.filterValue;switch(t){case"contains":return-1!==String(r).toLowerCase().indexOf(String(n).toLowerCase());case"ncontains":return-1===String(r).toLowerCase().indexOf(String(n).toLowerCase());case"eq":return String(r).toLowerCase()===String(n).toLowerCase();case"neq":return String(r).toLowerCase()!==String(n).toLowerCase();case"gt":case"nlte":return r>n;case"gte":case"nlt":return r>=n;case"lt":case"ngte":return r<n;case"lte":case"ngt":return r<=n;case"startsWith":return String(r).toLowerCase().startsWith(String(n).toLowerCase());case"nstartsWith":return!String(r).toLowerCase().startsWith(String(n).toLowerCase());case"endsWith":return String(r).toLowerCase().endsWith(String(n).toLowerCase());case"nendsWith":return!String(r).toLowerCase().endsWith(String(n).toLowerCase());default:throw new M({operator:t})}}function Qe(e){var t=e.item,r=e.underscoreSeparatedPropName;return"__NULL__"===t[r]?null:t[r]}function Ce(e){var t=e.operator,r=e.filterValue,n=e.underscoreSeparatedPropName;return e.relationalItems.some((function(e){var o=Qe({item:e,underscoreSeparatedPropName:n});return je({operator:t,filterValue:r,itemValue:o})}))}function Fe(e,t,r){return e===t?0:null===e?1:null===t?-1:r?e<t?-1:1:e<t?1:-1}function Le(e){return e.isRelational&&e.relationalKey?e.oneToMany?(e.node[e.relationalKey].nodes||[]).sort((function(t,r){return Fe(Me(t,e.underscoreSeparatedPropName),Me(r,e.underscoreSeparatedPropName),"asc"===e.direction)})).map((function(t){return t[e.underscoreSeparatedPropName]})).join(""):Me(e.node[e.relationalKey],e.underscoreSeparatedPropName):Me(e.node,e.underscoreSeparatedPropName)}function Me(e,t){return null===e[t]||"__NULL__"===e[t]?null:Number(e[t])||e[t]}function Ue(e,r){Object.keys(e).forEach((function(n){var o=e[n];null!=o&&o.filter&&function(e){var r=e.queryRecordEntry,n=e.data,o=e.alias,i=function e(r){var n={},o=r.queryRecordEntry.filter;if(!o)return n;var i=r.queryRecordEntry.relational,a=r.queryRecordEntry.def.data,u=function(u){var s=o[u],c=a[u]&&(a[u].type===exports.DATA_TYPES.object||a[u].type===exports.DATA_TYPES.maybeObject),l=!!i&&null!=i[u],d=t.isObject(s)&&(l||c);if("object"==typeof s&&null!==s&&d){var p=e({queryRecordEntry:y({},r.queryRecordEntry,{def:c?y({},r.queryRecordEntry.def,{data:a[u].boxedValue}):i[u].def,properties:c?r.queryRecordEntry.properties.filter((function(e){return e.startsWith(u)})).map((function(e){return e.split("__dot__").slice(1).join("__dot__")})):i[u].properties,filter:s})});Object.keys(p).forEach((function(e){n[u+"."+e]=p[e]}))}else if(t.isObject(s))n[u]=y({},s,{condition:s.condition||"and"});else if(void 0!==s){var f;n[u]=((f={})[exports.EStringFilterOperator.eq]=s,f.condition="and",f)}};for(var s in o)u(s);return n}({queryRecordEntry:r});if(i&&n[o]){var a=Object.keys(i).map((function(e){var t=String(e).split("."),n=t[0],o=t.slice(1),a=n&&r.relational&&r.relational[n],u=i[e],s=Object.keys(u).filter((function(e){return"condition"!==e})).map((function(e){return{operator:e,value:u[e]}})),c=!!a,l=c?o.join("__dot__"):e.replaceAll(".","__dot__");return{dotSeparatedPropName:e,underscoreSeparatedPropName:l,propNotInQuery:c?!1===a.properties.includes(l):!1===r.properties.includes(l),operators:s,condition:u.condition,isRelational:c,relationalKey:n,oneToOne:a&&"oneToOne"in a||void 0,oneToMany:a&&"oneToMany"in a||void 0}}));a.length>0&&t.update(n,o+".nodes",(function(e){return t.isArray(e)?e.filter((function(e){var t=a.find((function(e){return e.propNotInQuery}));if(t)throw new A({filterPropName:t.dotSeparatedPropName});var r=a.filter((function(e){return"or"===e.condition})),n=a.filter((function(e){return"and"===e.condition})),o=n.every((function(t){if(t.isRelational)return t.operators.every((function(r){var n=r.operator,o=r.value;return!0===t.oneToOne?je({operator:n,filterValue:o,itemValue:t.relationalKey?Qe({item:e[t.relationalKey],underscoreSeparatedPropName:t.underscoreSeparatedPropName}):""}):Ce({relationalItems:t.relationalKey&&e[t.relationalKey].nodes||[],operator:n,filterValue:o,underscoreSeparatedPropName:t.underscoreSeparatedPropName})}));var r="__NULL__"===e[t.underscoreSeparatedPropName]?null:e[t.underscoreSeparatedPropName];return t.operators.every((function(e){return je({operator:e.operator,filterValue:e.value,itemValue:r})}))}))||0===n.length;if(!o)return!1;var i=r.some((function(t){if(t.isRelational)return t.operators.some((function(r){var n=r.operator,o=r.value;return!0===t.oneToOne?je({operator:n,filterValue:o,itemValue:t.relationalKey?Qe({item:e[t.relationalKey],underscoreSeparatedPropName:t.underscoreSeparatedPropName}):""}):Ce({relationalItems:t.relationalKey&&e[t.relationalKey].nodes||[],operator:n,filterValue:o,underscoreSeparatedPropName:t.underscoreSeparatedPropName})}));var r=t.relationalKey?Qe({item:e,underscoreSeparatedPropName:t.underscoreSeparatedPropName}):"";return t.operators.some((function(e){return je({operator:e.operator,filterValue:e.value,itemValue:r})}))}))||0===r.length;return o&&i})):e}))}}({queryRecordEntry:o,data:r,alias:n}),null!=o&&o.sort&&function(e){var r=e.queryRecordEntry,n=e.data,o=e.alias,i=function e(r){var n={};for(var o in r){var i=r,a=i[o],u=t.isObject(a)&&!Object.keys(a).includes("direction");if("object"==typeof i[o]&&null!==i[o]&&u){var s=e(a);for(var c in s)s.hasOwnProperty(c)&&(n[o+"."+c]=s[c])}else t.isObject(a)?n[o]=a:void 0!==a&&(n[o]={direction:a})}return n}(e.sort);if(i&&n[o]){var a=t.orderBy(Object.keys(i).map((function(e,t){var n=String(e).split("."),o=n[0],a=n.slice(1),u=o&&r.relational&&r.relational[o],s=!!u,c=s?a.join("__dot__"):e.replaceAll(".","__dot__");return{dotSeparatedPropName:e,underscoreSeparatedPropName:c,propNotInQuery:s?!1===u.properties.includes(c):!1===r.properties.includes(c),isRelational:s,relationalKey:o,oneToOne:u&&"oneToOne"in u||void 0,oneToMany:u&&"oneToMany"in u||void 0,priority:i[e].priority||1e4*(t+1),direction:i[e].direction||"asc"}})),(function(e){return e.priority}),"asc"),u=a.filter((function(e){return e.propNotInQuery}));if(u.length>0)throw new k({sortPropName:u[0].dotSeparatedPropName});t.update(n,o+".nodes",(function(e){return t.isArray(e)?e.sort((function(e,t){return a.map((function(r){return Fe(Le({node:e,direction:r.direction,isRelational:r.isRelational,oneToMany:r.oneToMany,underscoreSeparatedPropName:r.underscoreSeparatedPropName,relationalKey:r.relationalKey}),Le({node:t,direction:r.direction,isRelational:r.isRelational,oneToMany:r.oneToMany,underscoreSeparatedPropName:r.underscoreSeparatedPropName,relationalKey:r.relationalKey}),"asc"===r.direction)})).reduce((function(e,t){return e||t}),void 0)})):e}))}}({queryRecordEntry:o,sort:o.sort,data:r,alias:n});var i=null==o?void 0:o.relational;null!=i&&(ve({queryRecordEntry:o})?r[n]&&r[n].nodes&&r[n].nodes.forEach((function(e){Ue(i,e)})):Ue(i,r[n]))}))}var Be,Ve,Ge,Ye,Ke=function(){function e(e){this.mmGQLInstance=void 0,this.queriesByContext={},this.inFlightQueryRecords=o.observable({}),this.mmGQLInstance=e}var t=e.prototype;return t.query=function(){var e=f(ne.mark((function e(t){var r,n,i,a,u,s=this;return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=this.getSlimmedQueryAgainstQueriesByContext(t.queryRecord))){e.next=5;break}return n=this.getDataForQueryFromQueriesByContext(t.queryRecord),this.log("QUERYSLIMMER: NEW QUERY FULLY CACHED","ORIGINAL QUERY: "+JSON.stringify(t.queryRecord),"CACHE: "+JSON.stringify(this.queriesByContext),"DATA RETURNED: "+JSON.stringify(n)),e.abrupt("return",n);case 5:if(null!==(i=this.slimNewQueryAgainstInFlightQueries(r))){e.next=14;break}return e.next=9,this.sendQueryRequest({queryId:t.queryId,queryRecord:r,useServerSidePaginationFilteringSorting:t.useServerSidePaginationFilteringSorting,tokenName:t.tokenName,batchKey:t.batchKey});case 9:return a=this.getDataForQueryFromQueriesByContext(t.queryRecord),this.log("QUERYSLIMMER: NEW QUERY SLIMMED BY CACHE","ORIGINAL QUERY: "+JSON.stringify(t.queryRecord),"SLIMMED QUERY: "+JSON.stringify(r),"CACHE: "+JSON.stringify(this.queriesByContext),"DATA RETURNED: "+JSON.stringify(a)),e.abrupt("return",a);case 14:return this.log("QUERYSLIMMER: AWAITING IN-FLIGHT QUERIES SLIMMED AGAINST","ORIGINAL QUERY: "+JSON.stringify(t.queryRecord),"IN-FLIGHT QUERIES: "+JSON.stringify(this.inFlightQueryRecords),"CACHE: "+JSON.stringify(this.queriesByContext)),e.next=17,this.sendQueryRequest({queryId:t.queryId,queryRecord:i.slimmedQueryRecord,useServerSidePaginationFilteringSorting:t.useServerSidePaginationFilteringSorting,tokenName:t.tokenName,batchKey:t.batchKey});case 17:return e.next=19,o.when((function(){return!s.areDependentQueriesStillInFlight({queryIds:i.queryIdsSlimmedAgainst,querySlimmedByInFlightQueries:i.slimmedQueryRecord})}),{timeout:1e3,onError:function(e){throw new Error("QUERYSLIMMER TIMED OUT WAITING ON IN FLIGHTQUERIES",e)}});case 19:return u=this.getDataForQueryFromQueriesByContext(t.queryRecord),this.log("QUERYSLIMMER: NEW QUERY SLIMMED BY CACHE AND IN-FLIGHT QUERIES","ORIGINAL QUERY: "+JSON.stringify(t.queryRecord),"SLIMMED QUERY: "+JSON.stringify(i.slimmedQueryRecord),"CACHE: "+JSON.stringify(this.queriesByContext),"DATA RETURNED: "+JSON.stringify(u)),e.abrupt("return",u);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getDataForQueryFromQueriesByContext=function(e,t){var r=this,n={};return Object.keys(e).forEach((function(o){var i=e[o];if(i){var a=r.createContextKeyForQueryRecordEntry(i,t),u=r.queriesByContext[a],s={},c={};i.properties.forEach((function(e){s[e]={nodes:u.results[e]}})),void 0!==i.relational&&(c=r.getDataForQueryFromQueriesByContext(i.relational,a)),n[o]=y({},s,c)}})),n},t.slimNewQueryAgainstInFlightQueries=function(e){var t=this,r=this.getQueryRecordsByContextMap(e),n=this.getInFlightQueriesToSlimAgainst(r);if(null===n)return null;var o=[],i={};return Object.keys(n).forEach((function(e){if(e in r){var a=y({},r[e]);n[e].forEach((function(e){var r=t.getSlimmedQueryAgainstInFlightQuery(a,e.queryRecord,!1);null!==r&&(o.push(e.queryId),a=r)})),i=y({},i,a)}})),0===Object.keys(i).length?null:{queryIdsSlimmedAgainst:o,slimmedQueryRecord:i}},t.getInFlightQueriesToSlimAgainst=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){var o=Object.keys(e[n])[0],i=e[n][o];if(i){var a=t.getRelationalDepthOfQueryRecordEntry(i);n in t.inFlightQueryRecords&&t.inFlightQueryRecords[n].forEach((function(e){if(o in e.queryRecord){var u=e.queryRecord[o];if(!u)return;u.properties.some((function(e){return i.properties.includes(e)}))&&t.getRelationalDepthOfQueryRecordEntry(u)<=a&&(n in r?r[n].push(e):r[n]=[e])}}))}})),0===Object.keys(r).length?null:r},t.getSlimmedQueryAgainstInFlightQuery=function(e,t,r){var n=this,o={},i={};Object.keys(e).forEach((function(a){var u=e[a];if(u){var s=u,c=u;if(void 0===t[a])r?i[a]=c:o[a]=s;else{var l=t[a];if(!l)return;var d=n.getPropertiesNotCurrentlyBeingRequested({newQueryProps:u.properties,inFlightProps:l.properties});if(null!==d&&void 0===u.relational&&(r?i[a]=y({},c,{properties:d}):o[a]=y({},s,{properties:d})),void 0!==u.relational&&void 0!==l.relational){var p=n.getSlimmedQueryAgainstInFlightQuery(u.relational,l.relational,!0);null!==p&&(r?i[a]=y({},c,{properties:null!=d?d:[],relational:y({},p)}):o[a]=y({},s,{properties:null!=d?d:[],relational:y({},p)}))}}}}));var a=r?i:o;return 0===Object.keys(a).length?null:a},t.getSlimmedQueryAgainstQueriesByContext=function(e,t){var r=this,n={},o={},i=void 0===t;Object.keys(e).forEach((function(a){var u=e[a],s=u,c=u;if(u){var l=r.createContextKeyForQueryRecordEntry(u,t);if(void 0===r.queriesByContext[l])i?n[a]=s:o[a]=c;else{var d=r.getPropertiesNotAlreadyCached({newQueryProps:u.properties,cachedQuerySubsByProperty:r.queriesByContext[l].subscriptionsByProperty});if(null!==d&&void 0===u.relational&&(i?n[a]=y({},s,{properties:d}):o[a]=y({},c,{properties:d})),void 0!==u.relational){var p=r.getSlimmedQueryAgainstQueriesByContext(u.relational,l);null!==p&&(i?n[a]=y({},s,{properties:null!=d?d:[],relational:y({},p)}):o[a]=y({},c,{properties:null!=d?d:[],relational:y({},p)}))}}}}));var a=i?n:o;return 0===Object.keys(a).length?null:a},t.onSubscriptionCancelled=function(e,t){var r=this;Object.keys(e).forEach((function(n){var o=e[n];if(o){var i=r.createContextKeyForQueryRecordEntry(o,t);if(void 0!==o.relational&&r.onSubscriptionCancelled(o.relational,i),i in r.queriesByContext){var a=r.queriesByContext[i].subscriptionsByProperty;o.properties.forEach((function(e){var t=a[e];t>=1&&(a[e]=t-1)}))}}}))},t.getRelationalDepthOfQueryRecordEntry=function(e){var t=this,r=0;return void 0!==e.relational&&(r+=1,Object.values(e.relational).forEach((function(e){r+=t.getRelationalDepthOfQueryRecordEntry(e)}))),r},t.populateQueriesByContext=function(e,t,r){var n=this;Object.keys(e).forEach((function(o){var i,a=e[o];if(a){var u=n.createContextKeyForQueryRecordEntry(a,r);if(n.queriesByContext[u]={subscriptionsByProperty:a.properties.reduce((function(e,t){return e[t]=e[t]?e[t]+1:1,e}),(null==(i=n.queriesByContext[u])?void 0:i.subscriptionsByProperty)||{}),results:t[o]},a.relational){var s=Object.keys(a.relational).reduce((function(e,r){return e[r]=t[o].map((function(e){return e[r]})),e}),{});n.populateQueriesByContext(a.relational,s,u)}}}))},t.createContextKeyForQueryRecordEntry=function(e,t){return(t?t+".":"")+e.def.type+("id"in e&&e.id?"":"s")+"("+this.stringifyQueryParams(e)+")"},t.getPropertiesNotAlreadyCached=function(e){var t=e.newQueryProps.filter((function(t){return!(t in e.cachedQuerySubsByProperty)||0===e.cachedQuerySubsByProperty[t]}));return 0===t.length?null:t},t.getPropertiesNotCurrentlyBeingRequested=function(e){var t=e.newQueryProps.filter((function(t){return!e.inFlightProps.includes(t)}));return 0===t.length?null:t},t.stringifyQueryParams=function(e){var t={ids:"ids"in e?e.ids:void 0,id:"id"in e?e.id:void 0};return Object.values(t).some((function(e){return null!=e}))?JSON.stringify(t):"NO_PARAMS"},t.getQueryRecordsByContextMap=function(e){var t=this;return Object.keys(e).reduce((function(r,n){var o,i=e[n];if(!i)return r;var a=t.createContextKeyForQueryRecordEntry(i),u=((o={})[n]=i,o);return r[a]=u,r}),{})},t.sendQueryRequest=function(){var e=f(ne.mark((function e(t){var r,n,o,i;return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={queryId:t.queryId,queryRecord:t.queryRecord},n=ge({queryId:t.queryId,queryRecord:t.queryRecord,useServerSidePaginationFilteringSorting:t.useServerSidePaginationFilteringSorting})){e.next=4;break}return e.abrupt("return");case 4:return o={gql:n,token:t.tokenName},"batchKey"in t&&void 0!==t.batchKey&&(o.batchKey=t.batchKey),e.prev=6,this.setInFlightQuery(r),e.next=10,this.mmGQLInstance.gqlClient.query(o);case 10:i=e.sent,this.removeInFlightQuery(r),this.populateQueriesByContext(t.queryRecord,i),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(6),this.removeInFlightQuery(r),new Error("QuerySlimmer: Error sending request for query: "+JSON.stringify(t.queryRecord),e.t0);case 19:case"end":return e.stop()}}),e,this,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),t.setInFlightQuery=function(e){var t=this,r=this.getQueryRecordsByContextMap(e.queryRecord);Object.keys(r).forEach((function(r){r in t.inFlightQueryRecords?t.inFlightQueryRecords[r].push(e):t.inFlightQueryRecords[r]=[e]}))},t.removeInFlightQuery=function(e){var t=this,r=this.getQueryRecordsByContextMap(e.queryRecord);Object.keys(r).forEach((function(r){r in t.inFlightQueryRecords&&(t.inFlightQueryRecords[r]=t.inFlightQueryRecords[r].filter((function(t){return t.queryId===e.queryId})),0===t.inFlightQueryRecords[r].length&&delete t.inFlightQueryRecords[r])}))},t.areDependentQueriesStillInFlight=function(e){var t=this,r=!1,n=this.getQueryRecordsByContextMap(e.querySlimmedByInFlightQueries);return Object.keys(n).forEach((function(n){r||n in t.inFlightQueryRecords&&t.inFlightQueryRecords[n].some((function(t){return e.queryIds.includes(t.queryId)}))&&(r=!0)})),r},t.log=function(e){if(this.mmGQLInstance.logging.querySlimming){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=console).log.apply(t,[e].concat(n))}},e}();function We(e,t){var r=e.filter((function(e){return"name"in e&&!!e.name})).map((function(e){if("name"in e)return e.name;throw Error("Expected an operation name here")}));return r.length?r.join("__"):t}function Je(e){return"\n    view: "+(e.view?"true":"false")+",\n    edit: "+(e.edit?"true":"false")+",\n    manage: "+(e.manage?"true":"false")+",\n    terminate: "+(e.terminate?"true":"false")+",\n    addChild: "+(e.addChild?"true":"false")+"\n  "}function ze(e){var t='{\ntype: "'+(e.type||"access")+'",'+Je(e.permissions)+"}",n=We([e],"CreateEdge");return r.gql(Be||(Be=R(["\n    mutation ",' {\n        AttachEdge(\n            newSourceId: "','"\n            targetId: "','"\n            edge: ',"\n            transactional: true\n        )\n    }"])),n,e.from,e.to,t)}function He(e){var t=We([e],"DropEdge");return r.gql(Ve||(Ve=R(["\n    mutation ",' {\n        DropEdge(\n            sourceId: "','"\n            targetId: "','"\n            edgeType: "','"\n            transactional: true\n        )\n    }'])),t,e.from,e.to,e.type||"access")}function $e(e){var t=We([e],"ReplaceEdge"),n='{\ntype: "'+(e.type||"access")+'", '+Je(e.permissions)+"}";return r.gql(Ge||(Ge=R(["\n    mutation ",' {\n        ReplaceEdge(\n            currentSourceId: "','"\n            newSourceId: "','"\n            targetId: "','"\n            edge: ',"\n            transactional: true\n        )\n    }"])),t,e.current,e.from,e.to,n)}function Xe(e){var t='{\ntype: "'+(e.type||"access")+'", '+Je(e.permissions)+"}",n=We([e],"UpdateEdge");return r.gql(Ye||(Ye=R(["\n    mutation ",' {\n        UpdateEdge(\n            sourceId: "','"\n            targetId: "','"\n            edge: ',"\n            transactional: true\n        )\n    }"])),n,e.from,e.to,t)}var Ze,et,tt,rt,nt=["to"],ot=["from"];function it(e,t){var r=Object.entries(e).reduce((function(e,t){var r=t[0],n=t[1];if("childNodes"===r){if(!Array.isArray(n))throw new Error('"childNodes" is supposed to be an array');return y({},e,{childNodes:n.map((function(e){return it(e)}))})}if("additionalEdges"===r){if(!Array.isArray(n))throw new Error('"additionalEdges" is supposed to be an array');return y({},e,{additionalEdges:n.map((function(e){return it(function(e){if(e.hasOwnProperty("to")){var t=e.to;return y({},S(e,nt),{targetId:t})}if(e.hasOwnProperty("from"))return y({},S(e,ot),{sourceId:e.from});throw new Error("convertEdgeDirectionNames - received invalid data")}(e),{skipBooleanStringWrapping:!0})}))})}return y({},e,function e(t){var r,n,o,i,a,u;if(null===t.value)return(r={})[t.key]=null,r;if(Array.isArray(t.value))return(n={})[t.key]="__JSON__"+at(JSON.stringify(t.value)),n;if("object"==typeof t.value)return function(t,r){return Object.entries(t).reduce((function(t,n){var o=n[0],i=n[1],a=null!=r&&r.parentKey?r.parentKey+"__dot__"+o:o;return"object"!=typeof i||null==i||Array.isArray(i)?t=y({},t,e(y({key:a,value:i},r))):(r&&r.omitObjectIdentifier||(t[a]="__object__"),t=y({},t,Object.entries(i).reduce((function(t,n){return y({},t,e(y({key:a+"__dot__"+n[0],value:n[1]},r)))}),{}))),t}),{})}(((o={})[t.key]=t.value,o),{omitObjectIdentifier:t.omitObjectIdentifier});if("string"==typeof t.value)return(i={})[t.key]=at(t.value),i;if("boolean"==typeof t.value||"number"==typeof t.value)return"number"==typeof t.value&&isNaN(t.value)?((u={})[t.key]=null,u):((a={})[t.key]=String(t.value),a);throw Error("I don't yet know how to handle feData of type \""+typeof t.value+'"')}({key:r,value:n}))}),{});return Object.entries(r).reduce((function(e,r,n){var o=r[0],i=r[1];return n>0&&(e+="\n"),"childNodes"===o||"additionalEdges"===o?e+(o+": [\n{\n")+i.join("\n}\n{\n")+"\n}\n]":e+(o+": ")+(null===i||("true"===i||"false"===i)&&null!=t&&t.skipBooleanStringWrapping?i:'"'+i+'"')}),"")}function at(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")}function ut(e){var t=["node: {\n        "+it(e.data)+"\n      }"];if(e.under){var r="string"==typeof e.under?'["'+e.under+'"]':'["'+e.under.join('", "')+'"]';t.push("underIds: "+r)}return"{\n    "+t.join("\n")+"\n  }"}function st(e){return"{\n      "+it(e)+"\n    }"}var ct=i.createContext(void 0),lt=i.createContext({unsafe__silenceDuplicateSubIdErrors:!1}),dt={suspendEnabled:"suspendEnabled",suspendDisabled:"suspendDisabled"};function pt(e){var t=new a.WebSocketLink({uri:e.wsUrl,options:{reconnect:!0}}),n=new u.HttpLink({uri:e.httpUrl,credentials:"include"}),o=r.split((function(e){return e.getContext().batchKey}),r.ApolloLink.from([l.createMultipartLink({uri:e.httpUrl,credentials:"include"})]),n),i=r.split((function(e){return e.getContext().batchedMutation}),new s.BatchHttpLink({uri:e.httpUrl,credentials:"include",batchMax:Number.MAX_SAFE_INTEGER,batchInterval:0}),o),d=r.split((function(e){var t=c.getMainDefinition(e.query);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),t,i);function p(e){return null!=e.token&&""!==e.token?{headers:{Authorization:"Bearer "+e.token}}:{}}function h(e){var t,n=null==(t=e.gql.loc)?void 0:t.source.body;if(!n)throw new Error("No documentBody found");var o=["GetChildren","GetReferences","GetNodes","GetNodesNew","GetNodesById"];if(o.some((function(e){return null==n?void 0:n.includes(e+"(")}))){var i=n;return o.forEach((function(t){i=i.replace(new RegExp(t+"\\((.*)\\)","g"),t+'($1, authToken: "'+e.token+'")')})),r.gql(i)}return e.gql}var g,v,m=new r.ApolloLink((function(e,t){return new r.Observable((function(r){var n;return Promise.resolve(e).then((function(){n=t(e).subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)})})).catch(r.error.bind(r)),function(){n&&n.unsubscribe()}}))})),b=new r.ApolloClient({link:r.ApolloLink.from([m,d]),cache:new r.InMemoryCache,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}});return{query:(v=f(ne.mark((function e(t){return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.query({query:t.gql,context:y({batchKey:"batchKey"in t?t.batchKey:"default"},p({token:t.token}))});case 2:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)}),subscribe:function(t){var r=b.subscribe({query:h(t)}).subscribe({next:function(r){e.logging.gqlClientSubscriptions&&console.log("subscription message",JSON.stringify(r,null,2)),r.data?t.onMessage(r.data):t.onError(new Error("Unexpected message structure.\n"+r))},error:t.onError});return function(){return r.unsubscribe()}},mutate:(g=f(ne.mark((function t(r){return ne.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.logging.gqlClientMutations&&console.log("mutations",r.mutations.map((function(e){var t;return null==(t=e.loc)?void 0:t.source.body}))),t.next=3,Promise.all(r.mutations.map((function(e){return b.mutate({mutation:e,context:y({batchedMutation:!0},p({token:r.token}))})})));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(e){return g.apply(this,arguments)})}}function ft(e){return e.endsWith("}")&&!e.includes("{")||e.endsWith("]")&&!e.includes("[")||e.endsWith(")")&&!e.includes("(")||e.startsWith(")")}function yt(e){return e.endsWith("{")||e.endsWith("[")||e.endsWith("(")}function ht(e){var t,r,n=null==(t=e.loc)?void 0:t.source.body;if(!n)throw Error("No source on the document node");return r=0,n.split("\n").map((function(e){return e.trim()})).map((function(e,t,n){var o=r;if(yt(e))r++;else if(ft(e)){o--;var i=n[t+1];i&&yt(i)&&ft(i)?r-=2:r--}return""+(o>0?new Array(2*o).fill(null).join(" "):"")+e})).join("\n")}function gt(e){return Object.entries(e).reduce((function(e,t){var r=t[0],n=t[1],o=n&&"tokenName"in n&&null!=n.tokenName?n.tokenName:"default";return e[o]=e[o]||{},e[o][r]=n,e}),{})}function vt(e){return Object.entries(e).reduce((function(e,t){var r=t[1];return r?(e[t[0]]=r,e):e}),{})}function mt(e){return Object.entries(e).reduce((function(e,t){return null==t[1]&&(e[t[0]]=null),e}),{})}function bt(e){return Et.apply(this,arguments)}function Et(){return(Et=f(ne.mark((function e(t){var r,n,o,i,a;return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){return t.mmGQLInstance.getToken({tokenName:e})},t.mmGQLInstance.logging.gqlClientQueries&&console.log("performing query",ht(t.queryGQL)),!t.mmGQLInstance.generateMockData){e.next=6;break}n=ke({queryRecord:t.queryRecord}),e.next=16;break;case 6:if(!t.mmGQLInstance.enableQuerySlimming){e.next=12;break}return e.next=9,t.mmGQLInstance.QuerySlimmer.query({queryId:t.queryId,queryRecord:t.queryRecord,useServerSidePaginationFilteringSorting:t.mmGQLInstance.paginationFilteringSortingInstance===exports.EPaginationFilteringSortingInstance.SERVER,tokenName:t.tokenName||"default",batchKey:t.batchKey||void 0});case 9:n=e.sent,e.next=16;break;case 12:return i=[{gql:t.queryGQL,token:r(t.tokenName||"default"),batchKey:t.batchKey||void 0}],e.next=15,(o=t.mmGQLInstance.gqlClient).query.apply(o,i);case 15:n=e.sent;case 16:if(t.mmGQLInstance.paginationFilteringSortingInstance!==exports.EPaginationFilteringSortingInstance.CLIENT){e.next=20;break}return Ue(t.queryRecord,a=n),e.abrupt("return",a);case 20:return e.next=22,new Promise((function(e){return setTimeout(e,(null==t.getMockDataDelay?void 0:t.getMockDataDelay())||0)}));case 22:return t.mmGQLInstance.logging.gqlClientQueries&&console.log("query response",JSON.stringify(n,null,2)),e.abrupt("return",n);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e){var t=e.previousQueryRecord,r={},n=[];return Object.entries(e.nextQueryRecord).forEach((function(e){var o=e[0],i=e[1];if(i){var a=t[o];if(!a)return n.push([o]),void(r[o]=i);if(Rt({previousQueryRecordEntry:a,nextQueryRecordEntry:i}))return r[o]=i,void n.push([o]);if(ve({queryRecordEntry:i})&&function e(t){var r=t.previousQueryRecordEntry,n=t.nextQueryRecordEntry;if(null==n.relational)return!1;if(null==r.relational)return!0;var o=r.relational;return Object.entries(n.relational).some((function(t){var r=t[1],n=o[t[0]];return!n||JSON.stringify({filter:n.filter,sort:n.sort,pagination:n.pagination})!==JSON.stringify({filter:r.filter,sort:r.sort,pagination:r.pagination})||e({previousQueryRecordEntry:n,nextQueryRecordEntry:r})}))}({previousQueryRecordEntry:a,nextQueryRecordEntry:i}))return r[o]=i,void n.push([o]);var u=function(e){var t=e.previousQueryRecordEntry,r=e.nextQueryRecordEntry;if(null==r.relational||null==t.relational)return r.relational;var n=t.relational,o=Object.entries(r.relational).reduce((function(e,t){var r=t[0],o=t[1],i=n[r];return i?(Rt({previousQueryRecordEntry:i,nextQueryRecordEntry:o})&&(e[r]=o),e):(e[r]=o,e)}),{});return Object.keys(o).length?o:void 0}({previousQueryRecordEntry:a,nextQueryRecordEntry:i});u&&(r[o]=y({},i,{relational:u}),Object.keys(u).forEach((function(e){var t=i.id;if(!t)throw Error("Expected a node id");n.push([Pt({aliasPathEntry:o,id:t}),e])})))}})),{minimalQueryRecord:r,aliasPathsToUpdate:n}}function Rt(e){var t=e.previousQueryRecordEntry,r=e.nextQueryRecordEntry;return JSON.stringify({filter:t.filter,sort:t.sort,pagination:t.pagination})!==JSON.stringify({filter:r.filter,sort:r.sort,pagination:r.pagination})}function Pt(e){return e.aliasPathEntry+"["+e.id+"]"}require("isomorphic-fetch");var xt=function(){function e(e){var n;if(this.gqlClient=void 0,this.generateMockData=void 0,this.getMockDataDelay=void 0,this.enableQuerySlimming=void 0,this.paginationFilteringSortingInstance=void 0,this.plugins=void 0,this.query=void 0,this.subscribe=void 0,this.QueryManager=void 0,this.QuerySlimmer=void 0,this.transaction=void 0,this.tokens={},this.DOFactory=void 0,this.DOProxyGenerator=void 0,this.logging=void 0,this.optimisticUpdatesOrchestrator=void 0,this.gqlClient=e.gqlClient,this.generateMockData=e.generateMockData,this.getMockDataDelay=e.getMockDataDelay,this.enableQuerySlimming=e.enableQuerySlimming,this.logging=e.logging,this.paginationFilteringSortingInstance=e.paginationFilteringSortingInstance,this.plugins=e.plugins,this.query=(n=this,function(){var e=f(ne.mark((function e(t,r){var o,i,a;return ne.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,t){return e.stack="\n"+(t||e.stack)+"\n"+o.substring(o.indexOf("\n")+1),e},o=(new Error).stack,i=(null==r?void 0:r.queryId)||"query"+oe++,e.abrupt("return",new Promise((function(e,o){var u={};try{new n.QueryManager(t,{resultsObject:u,onResultsUpdated:function(){e({data:u,error:void 0}),(null==r?void 0:r.onData)&&r.onData({results:u})},onQueryError:function(t){var n=a(new Error("Error querying data"),t.stack);if(null!=r&&r.onError)return r.onError(n),void e({data:u,error:n});o(n)},queryId:i,useServerSidePaginationFilteringSorting:n.paginationFilteringSortingInstance===exports.EPaginationFilteringSortingInstance.SERVER,batchKey:(null==r?void 0:r.batchKey)||null,getMockDataDelay:(null==n?void 0:n.getMockDataDelay)||null})}catch(t){var s=a(new Error("Error initializing query manager"),t.stack);if(null!=r&&r.onError)return r.onError(s),void e({data:u,error:s});o(s)}})));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),this.subscribe=function(e){return function(){var t=f(ne.mark((function t(r,n){var o,i,a;return ne.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(e,t){return e.stack="\n"+(t||e.stack)+"\n"+o.substring(o.indexOf("\n")+1),e},o=(new Error).stack,i=(null==n?void 0:n.queryId)||"query"+oe++,t.abrupt("return",new Promise((function(t,o){var u={},s=[];function c(){s.forEach((function(e){return e()})),s.length=0}var l={onQueryDefinitionsUpdated:function(e){throw Error("onQueryDefinitionsUpdated not initialized")}};try{var d=new e.QueryManager(r,{resultsObject:u,onResultsUpdated:function(){t({data:u,unsub:c,onQueryDefinitionsUpdated:function(e){return l.onQueryDefinitionsUpdated(e)},error:void 0}),n.onData({results:u})},onQueryError:function(e){var r=a(new Error("Error querying data"),e.stack);if(n.onError)return n.onError(r),void t({data:u,unsub:c,onQueryDefinitionsUpdated:d.onQueryDefinitionsUpdated,error:e});o(r)},queryId:i,useServerSidePaginationFilteringSorting:e.paginationFilteringSortingInstance===exports.EPaginationFilteringSortingInstance.SERVER,batchKey:(null==n?void 0:n.batchKey)||null,onQueryStateChange:n.onQueryManagerQueryStateChange,getMockDataDelay:(null==e?void 0:e.getMockDataDelay)||null});l.onQueryDefinitionsUpdated=d.onQueryDefinitionsUpdated}catch(e){var p=a(new Error("Error initializing query manager"),e.stack);if(n.onError)return n.onError(p),void t({data:u,unsub:c,onQueryDefinitionsUpdated:function(){throw a(new Error("onQueryDefinitionsUpdated called when there was an error initializing query manager"),e.stack)},error:e});o(p)}})));case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(this),this.DOProxyGenerator=function(e){return function(t){var r=t.relationalResults,n=t.node.computed,o=n?Object.keys(n).reduce((function(t,r){var o,a=function(){return n[r](i)};return null==(o=e.plugins)||o.forEach((function(e){var t;null!=(t=e.DOProxy)&&t.computedDecorator&&(a=e.DOProxy.computedDecorator({ProxyInstance:i,computedFn:a}))})),t[r]=a,t}),{}):{},i=new Proxy(t.do,{getOwnPropertyDescriptor:function(e,r){if(t.allPropertiesQueried.includes(r)||t.relationalQueries&&Object.keys(t.relationalQueries).includes(r)||Object.keys(z).includes(r))return y({},Object.getOwnPropertyDescriptor(e,r),{enumerable:!0});if(n&&Object.keys(n).includes(r))try{return o[r](),y({},Object.getOwnPropertyDescriptor(e,r),{enumerable:!0})}catch(t){if(!(t instanceof _))throw t;return y({},Object.getOwnPropertyDescriptor(e,r),{enumerable:!1})}return y({},Object.getOwnPropertyDescriptor(e,r),{enumerable:!1})},get:function(e,n){if("updateRelationalResults"===n)return function(e){r=y({},r,e)};if(r&&t.relationalQueries&&Object.keys(r).includes(n))return r[n];if(Object.keys(t.node.data).includes(n)){if(!t.allPropertiesQueried.includes(n))throw new _({propName:n,queryId:t.queryId,nodeType:t.node.type});var i=t.node.data[n];return i.type===exports.DATA_TYPES.object||i.type===exports.DATA_TYPES.maybeObject?null==t.do[n]?t.do[n]:function e(t){var r={};return Object.keys(t.dataForThisObject).forEach((function(n){var o=t.parentObjectKey?t.parentObjectKey+"__dot__"+n:n,i=t.dataForThisObject[n],a=t.allPropertiesQueried.includes(o)||t.allPropertiesQueried.some((function(e){return e.startsWith(o)}));Object.defineProperty(r,n,{enumerable:a,get:function(){if(i.type===exports.DATA_TYPES.object||i.type===exports.DATA_TYPES.maybeObject)return null==t.allCachedData[n]?t.allCachedData[n]:e({nodeType:t.nodeType,queryId:t.queryId,allCachedData:t.allCachedData[n],dataForThisObject:i.boxedValue,allPropertiesQueried:t.allPropertiesQueried,parentObjectKey:o});if(!a)throw new _({propName:o,nodeType:t.nodeType,queryId:t.queryId});return t.allCachedData?t.allCachedData[n]:void 0}})})),r}({nodeType:t.node.type,queryId:t.queryId,allCachedData:t.do[n],dataForThisObject:i.boxedValue,allPropertiesQueried:t.allPropertiesQueried,parentObjectKey:n}):t.do[n]}if(o[n])try{return o[n]()}catch(e){if(e instanceof _)throw new N({computedPropName:n,propName:e.propName,nodeType:t.node.type,queryId:t.queryId});throw e}return e[n]}});return i}}(this),this.DOFactory=function(e){return function(t){return function(){function r(r){var n,o=this;this.parsedData=void 0,this.version=-1,this.id=void 0,this.lastUpdatedBy=void 0,this.persistedData={},this._defaults=void 0,this.type=t.type,this.getDefaultData=function(e){if(e instanceof B)return o.isObjectType(e.type)?o.getDefaultData(e.boxedValue):e.defaultValue;var t=function(t,r){var n=r||e[t]._default;if(n instanceof Error)throw n;return o.isArrayType(n.type)?o.isObjectType(n.boxedValue.type)?[o.getDefaultData(n.boxedValue.boxedValue)]:[n.boxedValue.defaultValue]:n.defaultValue};return"function"==typeof e?t(void 0,e._default):Object.keys(e).reduce((function(r,n){var i=e[n];if(o.isObjectType(i.type)||o.isRecordType(i.type))r[n]=o.getDefaultData(i.boxedValue);else if("function"==typeof i){var a=t(n);r[n]=a}else r[n]=e[n].defaultValue;return r}),{})},this.onDataReceived=function(e,r){if(null==e.version)throw Error("Message received for a node was missing a version");var n=Number(e.version);if(null!=r&&r.__unsafeIgnoreVersion||n>=o.version){o.version=n,o.lastUpdatedBy=e.lastUpdatedBy;var i=o.parseReceivedData({initialData:e,nodeProperties:t.properties});o.extendPersistedWithNewlyReceivedData({data:t.properties,object:o.persistedData,extension:i}),o.parsedData=o.getParsedData({data:t.properties,persistedData:o.persistedData,defaultData:o._defaults})}},this.setObjectProp=function(e){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){return o.parsedData[e]}})},this.setPrimitiveValueProp=function(e){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){return o.parsedData[e]}})},this.setArrayProp=function(e){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){return o.parsedData[e]}})},this._defaults=this.getDefaultData(t.properties),this.id=r.id,this.lastUpdatedBy=r.lastUpdatedBy,null!=r.version&&(this.version=Number(r.version)),r&&(this.persistedData=this.parseReceivedData({initialData:r,nodeProperties:t.properties})),this.parsedData=this.getParsedData({data:t.properties,persistedData:this.persistedData,defaultData:this._defaults}),null==(n=e.plugins)||n.forEach((function(e){var t;null!=(t=e.DO)&&t.onConstruct&&e.DO.onConstruct({DOInstance:o,parsedDataKey:"parsedData"})})),this.initializeNodePropGetters(),this.initializeNodeComputedGetters(),this.initializeNodeRelationalGetters()}var n=r.prototype;return n.parseReceivedData=function(e){var t=this,r=e.initialData;return Object.entries(e.nodeProperties).reduce((function(e,n){var o=n[0],i=t.getData(n[1]),a=o in r&&null!=r[o]&&"__NULL__"!==r[o];return t.isObjectType(i.type)&&a?e[o]=t.parseReceivedData({initialData:r[o],nodeProperties:i.boxedValue}):t.isArrayType(i.type)&&a?e[o]=r[o].map(i.boxedValue.parser):o in r&&null===r[o]?e[o]=null:a&&(e[o]=i.parser(r[o])),e}),{})},n.getParsedData=function(e){var t=this;if(e.data instanceof B&&e.data.isOptional&&null==e.persistedData)return null;var r=this.getData(e.data);return r instanceof B&&r.boxedValue?this.isArrayType(r.type)?e.persistedData?(e.persistedData||[]).map((function(n){var o;return t.getParsedData({data:r.boxedValue,persistedData:n,defaultData:r.type===exports.DATA_TYPES.array&&(null==(o=e.defaultData)?void 0:o[0])||null})})):e.defaultData:(e.persistedData||(e.persistedData={}),this.getData(r.boxedValue)instanceof B?Object.keys(e.persistedData).reduce((function(n,o){return n[o]=t.getParsedData({data:r.boxedValue,persistedData:e.persistedData[o],defaultData:e.defaultData}),n}),{}):Object.keys(r.boxedValue).reduce((function(n,o){var i;return n[o]=t.getParsedData({data:r.boxedValue[o],persistedData:e.persistedData[o],defaultData:null==(i=e.defaultData)?void 0:i[o]}),n}),{})):r instanceof B?"__NULL__"===e.persistedData&&e.data.isOptional?null:null!=e.persistedData?r.parser(e.persistedData):e.defaultData:Object.keys(r).reduce((function(n,o){return n[o]=t.getParsedData({data:r[o],persistedData:e.persistedData[o],defaultData:e.defaultData[o]}),n}),{})},n.extendPersistedWithNewlyReceivedData=function(e){var t=this;Object.entries(e.extension).forEach((function(r){var n=r[0],o=r[1],i=t.getData(e.data[n]);t.isRecordType(i.type)?e.object[n]=o:t.isObjectType(i.type)?null==o?e.object[n]=null:(e.object[n]=e.object[n]||{},t.extendPersistedWithNewlyReceivedData({data:i.boxedValue,object:e.object[n],extension:o})):e.object[n]=o}))},n.initializeNodePropGetters=function(){var e=this;Object.keys(t.properties).forEach((function(r){if(!Object.keys(z).includes(r)){var n=e.getData(t.properties[r]);e.isObjectType(n.type)?e.setObjectProp(r):e.isArrayType(n.type)?e.setArrayProp(r):e.setPrimitiveValueProp(r)}}))},n.initializeNodeComputedGetters=function(){var e=this,r=t.computed;r&&Object.keys(r).forEach((function(t){e.setComputedProp({propName:t,computedFn:r[t]})}))},n.initializeNodeRelationalGetters=function(){var e=this,r=t.relational;r&&Object.keys(r).forEach((function(t){e.setRelationalProp({relationshipName:t,relationalQueryGetter:r[t]})}))},n.setComputedProp=function(t){var r,n=this,o=function(){return t.computedFn(n)};null==(r=e.plugins)||r.forEach((function(e){var t;null!=(t=e.DO)&&t.computedDecorator&&(o=e.DO.computedDecorator({computedFn:o,DOInstance:n}))})),Object.defineProperty(this,t.propName,{get:function(){return o()},configurable:!0,enumerable:!0})},n.setRelationalProp=function(e){Object.defineProperty(this,e.relationshipName,{configurable:!0,get:function(){return e.relationalQueryGetter()}})},n.getData=function(e){return"function"==typeof e?e._default:e},n.isArrayType=function(e){return e===exports.DATA_TYPES.array||e===exports.DATA_TYPES.maybeArray},n.isObjectType=function(e){return e===exports.DATA_TYPES.object||e===exports.DATA_TYPES.maybeObject},n.isRecordType=function(e){return e===exports.DATA_TYPES.record||e===exports.DATA_TYPES.maybeRecord},r}()}}(this),this.QueryManager=function(e){return function(){function t(t,r){var n=this;this.state={},this.queryDefinitions=void 0,this.opts=void 0,this.queryRecord=null,this.queryIdx=0,this.onQueryDefinitionsUpdated=function(){var t=f(ne.mark((function t(r){var o,i,a,u,s,c,l,d,p,h,g;return ne.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=function(){return o?St({nextQueryRecord:i,previousQueryRecord:o}):{minimalQueryRecord:i}},o=n.queryRecord,i=de({queryDefinitions:r,queryId:n.opts.queryId}),n.queryRecord=i,a=vt(r),u=mt(r),Object.keys(a).length){t.next=13;break}if(!o){t.next=11;break}if(Object.keys(o).filter((function(e){return null==o[e]})).length!==Object.keys(u).length){t.next=11;break}return t.abrupt("return");case 11:return n.onQueryDefinitionUpdatedResult({queryResult:u,minimalQueryRecord:n.queryRecord}),t.abrupt("return");case 13:if(c=s(),l=c.minimalQueryRecord,d=c.aliasPathsToUpdate,Object.keys(l).length){t.next=16;break}return t.abrupt("return");case 16:return p=n.queryIdx++,null==n.opts.onQueryStateChange||n.opts.onQueryStateChange({queryIdx:p,queryState:exports.QueryState.LOADING}),h=gt(l),t.prev=19,t.next=22,Promise.all(Object.entries(h).map(function(){var t=f(ne.mark((function t(r){var o,i,a;return ne.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r[0],!(a=ge({queryId:n.opts.queryId,queryRecord:i=r[1],useServerSidePaginationFilteringSorting:n.opts.useServerSidePaginationFilteringSorting}))){t.next=6;break}return t.next=5,bt({queryRecord:i,queryGQL:a,queryId:n.opts.queryId,batchKey:n.opts.batchKey,getMockDataDelay:n.opts.getMockDataDelay,tokenName:o,mmGQLInstance:e});case 5:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",{});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 22:g=t.sent.reduce((function(e,t){return y({},e,t)}),y({},u)),n.onQueryDefinitionUpdatedResult({queryResult:g,minimalQueryRecord:l,aliasPathsToUpdate:d}),null==n.opts.onQueryStateChange||n.opts.onQueryStateChange({queryIdx:p,queryState:exports.QueryState.IDLE}),t.next=32;break;case 28:throw t.prev=28,t.t0=t.catch(19),null==n.opts.onQueryStateChange||n.opts.onQueryStateChange({queryIdx:p,queryState:exports.QueryState.ERROR,error:t.t0}),t.t0;case 32:case"end":return t.stop()}}),t,null,[[19,28]])})));return function(e){return t.apply(this,arguments)}}(),this.queryDefinitions=t,this.opts=r,this.onQueryDefinitionsUpdated(this.queryDefinitions).catch((function(e){n.opts.onQueryError(e)}))}var r=t.prototype;return r.onSubscriptionMessage=function(e){var t,r;if(!this.queryRecord)throw Error("No query record initialized");var n=e.subscriptionAlias,o=this.queryRecord[n];this.notifyRepositories({data:(t={},t[n]=e.node,t),queryRecord:(r={},r[n]=o,r)}),this.updateProxiesAndStateFromSubscriptionMessage(e),Object.assign(this.opts.resultsObject,this.getResultsFromState({state:this.state,aliasPath:[]})),this.opts.onResultsUpdated()},r.getResultsFromState=function(e){var t=this;return Object.keys(e.state).reduce((function(r,n){var o=e.state[n],i=o.idsOrIdInCurrentResult,a=o.pageInfoFromResults,u=o.clientSidePageInfo,s=t.removeUnionSuffix(n);if(Array.isArray(i)){if(!a)throw Error("No page info for results found for the alias "+n);if(!u)throw Error("No client side page info found for the alias "+n);var c=i.map((function(e){return o.proxyCache[e].proxy})),l=[].concat(e.aliasPath||[],[s]);r[s]=new ie({items:c,clientSidePageInfo:u,pageInfoFromResults:a,onPaginationRequestStateChanged:t.opts.onResultsUpdated,onLoadMoreResults:function(){return t.onLoadMoreResults({aliasPath:l,previousEndCursor:a.endCursor})},onGoToNextPage:function(){return t.onGoToNextPage({aliasPath:l,previousEndCursor:a.endCursor})},onGoToPreviousPage:function(){return t.onGoToPreviousPage({aliasPath:l,previousStartCursor:a.startCursor})},useServerSidePaginationFilteringSorting:t.opts.useServerSidePaginationFilteringSorting})}else r[s]=i?o.proxyCache[i].proxy:null;return r}),{})},r.notifyRepositories=function(e){var t=this;Object.keys(e.queryRecord).forEach((function(r){var n=e.queryRecord[r];if(n){var o=t.getDataFromResponse({queryRecordEntry:n,dataForThisAlias:e.data[r]}),i=n.def.repository;Array.isArray(o)?o.forEach((function(e){return i.onDataReceived(e)})):i.onDataReceived(o);var a=n.relational;a&&Object.keys(a).forEach((function(e){var r=Array.isArray(o)?o.flatMap((function(t){return t[e]})):o[e];Array.isArray(r)||(r=[r]),r.forEach((function(r){var n,o,i=a[e];e.includes("__rU__")&&r&&r.type!==i.def.type||t.notifyRepositories({data:(n={},n[e]=r,n),queryRecord:(o={},o[e]=i,o)})}))}))}}))},r.getNewStateFromQueryResult=function(e){var t=this;return Object.keys(e.queryRecord).reduce((function(r,n){var o=t.buildCacheEntry({nodeData:t.getDataFromResponse({dataForThisAlias:e.queryResult[n],queryRecordEntry:e.queryRecord[n]}),pageInfoFromResults:t.getPageInfoFromResponse({dataForThisAlias:e.queryResult[n]}),clientSidePageInfo:t.getInitialClientSidePageInfo({queryRecordEntry:e.queryRecord[n]}),queryRecord:e.queryRecord,queryAlias:n,aliasPath:[n]});return o?(r[n]=o,r):r}),{})},r.buildCacheEntry=function(t){var r=this,n=t.nodeData,o=t.queryRecord[t.queryAlias];if(!o)return{idsOrIdInCurrentResult:null,proxyCache:{},pageInfoFromResults:null,clientSidePageInfo:null};var i=o.relational;if(t.queryAlias.includes("__rU__")){var a=t.nodeData[0];if(a&&a.type!==o.def.type)return null}var u,s=function(n){var a=function(e){return i?Object.keys(i).reduce((function(n,o){var a,u=r.getDataFromResponse({queryRecordEntry:i[o],dataForThisAlias:e[o]});if(!u)return n;var s=r.addIdToLastEntryInAliasPath({aliasPath:t.aliasPath,id:e.id}),c=r.buildCacheEntry({nodeData:u,pageInfoFromResults:r.getPageInfoFromResponse({dataForThisAlias:e[o]}),clientSidePageInfo:r.getInitialClientSidePageInfo({queryRecordEntry:i[o]}),queryAlias:o,queryRecord:i,aliasPath:[].concat(s,[o])});return c?y({},n,((a={})[r.removeUnionSuffix(o)]=c,a)):n}),{}):null}(n.node),u=o.def.repository,s=i?r.getApplicableRelationalQueries({relationalQueries:i,nodeData:n.node}):null,c=r.addIdToLastEntryInAliasPath({aliasPath:t.aliasPath,id:n.node.id});return{proxy:e.DOProxyGenerator({node:o.def,allPropertiesQueried:o.properties,relationalQueries:s,queryId:r.opts.queryId,relationalResults:a?r.getResultsFromState({state:a,aliasPath:c}):null,do:u.byId(n.node.id)}),relationalState:a}};if(Array.isArray(t.nodeData)){if("id"in o){if(null==t.nodeData[0]){if(!o.allowNullResult)throw new L({receivedData:t.nodeData,message:'Queried a node by id for the query with the id "'+this.opts.queryId+'" but received back an empty array'});return{idsOrIdInCurrentResult:null,proxyCache:{},pageInfoFromResults:t.pageInfoFromResults,clientSidePageInfo:t.clientSidePageInfo}}return{idsOrIdInCurrentResult:t.nodeData[0].id,proxyCache:t.nodeData.reduce((function(e,t){return e[t.id]=s({node:t}),e}),{}),pageInfoFromResults:t.pageInfoFromResults,clientSidePageInfo:t.clientSidePageInfo}}return{idsOrIdInCurrentResult:t.nodeData.map((function(e){return e.id})),proxyCache:t.nodeData.reduce((function(e,t){return e[t.id]=s({node:t}),e}),{}),pageInfoFromResults:t.pageInfoFromResults,clientSidePageInfo:t.clientSidePageInfo}}return{idsOrIdInCurrentResult:t.nodeData.id,proxyCache:(u={},u[n.id]=s({node:n}),u),pageInfoFromResults:t.pageInfoFromResults,clientSidePageInfo:t.clientSidePageInfo}},r.updateProxiesAndStateFromSubscriptionMessage=function(e){if(!this.queryRecord)throw Error("No query record initialized");var t=e.node,r=e.subscriptionAlias,n=e.operation;if("DeleteNode"!==n.action&&"DeleteEdge"!==n.action||n.path!==t.id){var o=this.queryRecord[r];this.state[r]=this.state[r]||{};var i=this.state[r],a=t.id,u=i.proxyCache[a]||{},s=u.proxy,c=u.relationalState;if(s){var l=this.recursivelyUpdateProxyAndReturnNewCacheEntry({proxy:s,newRelationalData:this.getRelationalData({queryRecord:o,node:e.node}),relationalQueryRecord:(null==o?void 0:o.relational)||null,currentState:{proxy:s,relationalState:c},aliasPath:[r]});i.proxyCache[a]=l}else{var d=this.buildCacheEntry({nodeData:t,queryAlias:r,queryRecord:this.queryRecord,pageInfoFromResults:null,clientSidePageInfo:null,aliasPath:[r]});if(!d)return;var p=d.proxyCache;if(!p[t.id])throw Error("Expected a newly generated proxy");i.proxyCache[a]=p[t.id]}if(o)if("id"in o){if(i.idsOrIdInCurrentResult===a)return;this.state[e.subscriptionAlias].idsOrIdInCurrentResult=a}else{if((i.idsOrIdInCurrentResult||[]).includes(a))return;this.state[e.subscriptionAlias].idsOrIdInCurrentResult=[a].concat(this.state[e.subscriptionAlias].idsOrIdInCurrentResult)}}else{var f=this.state[r].idsOrIdInCurrentResult;this.state[r].idsOrIdInCurrentResult=Array.isArray(f)?f.filter((function(e){return e!==t.id})):null}},r.recursivelyUpdateProxyAndReturnNewCacheEntry=function(e){var t=this,r=e.proxy,n=e.newRelationalData,o=e.relationalQueryRecord,i=e.currentState.relationalState,a=o?Object.keys(o).reduce((function(r,a){if(!n||!n[a])return r;var u=n[a],s=o[a],c=i?i[a]:null;if(!c){var l=t.buildCacheEntry({nodeData:u,queryAlias:a,queryRecord:o,pageInfoFromResults:null,clientSidePageInfo:null,aliasPath:[].concat(e.aliasPath,[a])});return l?(r[a]=l,r):r}if(!Array.isArray(u))throw Error("Not implemented. "+JSON.stringify(u));return r[a]=r[a]||{proxyCache:{},idsOrIdInCurrentResult:[]},u.forEach((function(n){var i,u=null==(i=c.proxyCache[n.id])?void 0:i.proxy;if(u){var l,d=t.recursivelyUpdateProxyAndReturnNewCacheEntry({proxy:u,newRelationalData:t.getRelationalData({queryRecord:s,node:n}),relationalQueryRecord:s.relational||null,currentState:c.proxyCache[n.id],aliasPath:[].concat(e.aliasPath,[a])});r[a]={proxyCache:y({},r[a].proxyCache,(l={},l[n.id]=d,l)),idsOrIdInCurrentResult:[].concat(r[a].idsOrIdInCurrentResult,[n.id]),pageInfoFromResults:null,clientSidePageInfo:null}}else{var p,f=t.buildCacheEntry({nodeData:n,queryAlias:a,queryRecord:o,pageInfoFromResults:null,clientSidePageInfo:null,aliasPath:[].concat(e.aliasPath,[a])});if(!f)return;r[a]={proxyCache:y({},r[a].proxyCache,(p={},p[n.id]=f.proxyCache[n.id],p)),idsOrIdInCurrentResult:[].concat(r[a].idsOrIdInCurrentResult,[n.id]),pageInfoFromResults:null,clientSidePageInfo:null}}})),r}),{}):null;return r.updateRelationalResults(a?this.getResultsFromState({state:a,aliasPath:e.aliasPath}):null),{proxy:r,relationalState:a}},r.getRelationalData=function(e){return e.queryRecord&&e.queryRecord.relational?Object.keys(e.queryRecord.relational).reduce((function(t,r){return t[r]=e.node[r],t}),{}):null},r.removeUnionSuffix=function(e){return e.includes("__rU__")?e.split("__rU__")[0]:e},r.getApplicableRelationalQueries=function(e){var t=this;return Object.keys(e.relationalQueries).reduce((function(r,n){var o,i;if(!n.includes("__rU__"))return y({},r,((o={})[n]=e.relationalQueries[n],o));var a=e.nodeData[n]?e.nodeData[n][0]:null;return a&&a.type!==e.relationalQueries[n].def.type?r:y({},r,((i={})[t.removeUnionSuffix(n)]=e.relationalQueries[n],i))}),{})},r.getDataFromResponse=function(e){return null==e.queryRecordEntry?null:ve({queryRecordEntry:e.queryRecordEntry})?e.dataForThisAlias.nodes:e.dataForThisAlias},r.getPageInfoFromResponse=function(e){var t;return(null==(t=e.dataForThisAlias)?void 0:t.pageInfo)||null},r.getPageInfoFromResponseForAlias=function(e){var t=e.aliasPath,r=t[0],n=t.slice(1),o=this.removeIdFromAlias(r),i=this.getIdFromAlias(r);if(0===n.length){if(null!=i){if(!Array.isArray(!!e.response[o]&&e.response[o].nodes))throw Error("Expected array of data when an id is found in the alias");var a=e.response[o].nodes.find((function(e){return e.id===i}));if(!a)throw Error("Expected data for this alias when an id is found in the alias");return this.getPageInfoFromResponse({dataForThisAlias:a})}return this.getPageInfoFromResponse({dataForThisAlias:e.response[o]})}var u=e.response[o].nodes.find((function(e){return e.id===i}));return this.getPageInfoFromResponseForAlias({aliasPath:n,response:u})},r.getInitialClientSidePageInfo=function(e){var t;return e.queryRecordEntry&&ve({queryRecordEntry:e.queryRecordEntry})?{lastQueriedPage:1,pageSize:(null==(t=e.queryRecordEntry.pagination)?void 0:t.itemsPerPage)||10}:null},r.onLoadMoreResults=function(){var t=f(ne.mark((function t(r){var n,o,i;return ne.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.queryRecord){t.next=2;break}throw Error("No query record initialized");case 2:if(this.opts.useServerSidePaginationFilteringSorting){t.next=6;break}return t.next=5,new Promise((function(t){return setTimeout(t,(null==e.getMockDataDelay?void 0:e.getMockDataDelay())||0)}));case 5:return t.abrupt("return");case 6:if(n=this.getMinimalQueryRecordForMoreResults({preExistingQueryRecord:this.queryRecord,previousEndCursor:r.previousEndCursor,aliasPath:r.aliasPath}),o=this.getTokenNameForAliasPath(r.aliasPath),i=ge({queryId:this.opts.queryId,queryRecord:n,useServerSidePaginationFilteringSorting:this.opts.useServerSidePaginationFilteringSorting})){t.next=11;break}throw Error("Expected queryGQL to be defined");case 11:return t.next=13,bt({queryRecord:n,queryGQL:i,tokenName:o,batchKey:this.opts.batchKey||null,mmGQLInstance:e,queryId:this.opts.queryId,getMockDataDelay:this.opts.getMockDataDelay});case 13:this.handlePagingEventData({aliasPath:r.aliasPath,queryRecord:n,newData:t.sent,event:"LOAD_MORE"});case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.onGoToNextPage=function(){var t=f(ne.mark((function t(r){var n,o,i;return ne.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.queryRecord){t.next=2;break}throw Error("No query record initialized");case 2:if(this.opts.useServerSidePaginationFilteringSorting){t.next=6;break}return t.next=5,new Promise((function(t){return setTimeout(t,(null==e.getMockDataDelay?void 0:e.getMockDataDelay())||0)}));case 5:return t.abrupt("return");case 6:if(n=this.getMinimalQueryRecordForMoreResults({preExistingQueryRecord:this.queryRecord,previousEndCursor:r.previousEndCursor,aliasPath:r.aliasPath}),o=this.getTokenNameForAliasPath(r.aliasPath),i=ge({queryId:this.opts.queryId,queryRecord:n,useServerSidePaginationFilteringSorting:this.opts.useServerSidePaginationFilteringSorting})){t.next=11;break}throw Error("Expected queryGQL to be defined");case 11:return t.next=13,bt({queryRecord:n,queryGQL:i,tokenName:o,batchKey:this.opts.batchKey||null,mmGQLInstance:e,queryId:this.opts.queryId,getMockDataDelay:this.opts.getMockDataDelay});case 13:this.handlePagingEventData({aliasPath:r.aliasPath,queryRecord:n,newData:t.sent,event:"GO_TO_NEXT"});case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.onGoToPreviousPage=function(){var t=f(ne.mark((function t(r){var n,o,i;return ne.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.queryRecord){t.next=2;break}throw Error("No query record initialized");case 2:if(this.opts.useServerSidePaginationFilteringSorting){t.next=6;break}return t.next=5,new Promise((function(t){return setTimeout(t,(null==e.getMockDataDelay?void 0:e.getMockDataDelay())||0)}));case 5:return t.abrupt("return");case 6:if(n=this.getMinimalQueryRecordForPreviousPage({preExistingQueryRecord:this.queryRecord,previousStartCursor:r.previousStartCursor,aliasPath:r.aliasPath}),o=this.getTokenNameForAliasPath(r.aliasPath),i=ge({queryId:this.opts.queryId,queryRecord:n,useServerSidePaginationFilteringSorting:this.opts.useServerSidePaginationFilteringSorting})){t.next=11;break}throw Error("Expected queryGQL to be defined");case 11:return t.next=13,bt({queryRecord:n,queryGQL:i,tokenName:o,batchKey:this.opts.batchKey||null,mmGQLInstance:e,queryId:this.opts.queryId,getMockDataDelay:this.opts.getMockDataDelay});case 13:this.handlePagingEventData({aliasPath:r.aliasPath,queryRecord:n,newData:t.sent,event:"GO_TO_PREVIOUS"});case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getTokenNameForAliasPath=function(e){var t;if(!this.queryRecord)throw Error("No query record initialized");if(0===e.length)throw new Error("Alias path must contain at least 1 entry");var r=this.removeIdFromAlias(e[0]);if(!this.queryRecord[r])throw Error("The key "+r+" was not found in the queryRecord\n"+JSON.stringify(this.queryRecord,null,2));return(null==(t=this.queryRecord[r])?void 0:t.tokenName)||"default"},r.getMinimalQueryRecordWithUpdatedPaginationParams=function(e){var t=e.aliasPath,r=t[0],n=t.slice(1),o={},i=this.removeIdFromAlias(r),a=e.preExistingQueryRecord[i];if(!a)throw new Error("No preexisting query record entry for the alias "+i);return o[i]=y({},a,n.length?{relational:this.getMinimalQueryRecordWithUpdatedPaginationParams({aliasPath:n,preExistingQueryRecord:a.relational,newPaginationParams:e.newPaginationParams})}:{pagination:y({},a.pagination,e.newPaginationParams)}),o},r.getMinimalQueryRecordForMoreResults=function(e){return this.getMinimalQueryRecordWithUpdatedPaginationParams({aliasPath:e.aliasPath,preExistingQueryRecord:e.preExistingQueryRecord,newPaginationParams:{startCursor:e.previousEndCursor,endCursor:void 0}})},r.getMinimalQueryRecordForPreviousPage=function(e){return this.getMinimalQueryRecordWithUpdatedPaginationParams({aliasPath:e.aliasPath,preExistingQueryRecord:e.preExistingQueryRecord,newPaginationParams:{endCursor:e.previousStartCursor,startCursor:void 0}})},r.handlePagingEventData=function(e){this.notifyRepositories({data:e.newData,queryRecord:e.queryRecord});var t=this.getNewStateFromQueryResult({queryResult:e.newData,queryRecord:e.queryRecord});this.extendStateObject({aliasPath:e.aliasPath,originalAliasPath:e.aliasPath,state:this.state,newState:t,mergeStrategy:"LOAD_MORE"===e.event?"CONCAT":"REPLACE"}),ee({object:this.opts.resultsObject,extension:this.getResultsFromState({state:this.state}),extendNestedObjects:!1,deleteKeysNotInExtension:!1}),this.opts.onResultsUpdated()},r.onQueryDefinitionUpdatedResult=function(e){var t=this;this.notifyRepositories({data:e.queryResult,queryRecord:e.minimalQueryRecord});var r=this.getNewStateFromQueryResult({queryResult:e.queryResult,queryRecord:e.minimalQueryRecord});e.aliasPathsToUpdate?e.aliasPathsToUpdate.forEach((function(e){t.extendStateObject({aliasPath:e,originalAliasPath:e,state:t.state,newState:r,mergeStrategy:"REPLACE"})})):Object.keys(r).forEach((function(e){t.extendStateObject({aliasPath:[e],originalAliasPath:[e],state:t.state,newState:r,mergeStrategy:"REPLACE"})})),ee({object:this.opts.resultsObject,extension:this.getResultsFromState({state:this.state,aliasPath:[]}),extendNestedObjects:!1,deleteKeysNotInExtension:!1}),this.opts.onResultsUpdated()},r.extendStateObject=function(e){var t=e.aliasPath,r=t[0],n=t.slice(1),o=this.removeIdFromAlias(r),i=e.state[o],a=e.newState[o];if(!i&&a&&(e.state[o]=a),0===n.length){var u,s;if(i)if(i.pageInfoFromResults=a.pageInfoFromResults,i.clientSidePageInfo=a.clientSidePageInfo,i.proxyCache=y({},i.proxyCache,a.proxyCache),"CONCAT"===e.mergeStrategy){if(!Array.isArray(i.idsOrIdInCurrentResult)||!Array.isArray(a.idsOrIdInCurrentResult))throw Error('Expected both existing and new state "idsOrIdInCurrentResult" to be arrays');i.idsOrIdInCurrentResult=[].concat(i.idsOrIdInCurrentResult,a.idsOrIdInCurrentResult)}else{if("REPLACE"!==e.mergeStrategy)throw new U(e.mergeStrategy);i.idsOrIdInCurrentResult=a.idsOrIdInCurrentResult}null==(u=e.parentProxy)||u.updateRelationalResults(this.getResultsFromState({state:(s={},s[o]=e.state[o],s),aliasPath:e.originalAliasPath}))}else{var c=this.getIdFromAlias(r);if(!c)throw Error("Expected an id for the alias "+r);var l=i.proxyCache[c];if(!l)throw Error("Expected a proxy cache entry for the id "+c+". This likely means that a query was performed with an id, and the results included a different id");var d=l.relationalState;if(!d)throw Error("Expected existing relational state for the alias "+r+" and the id "+c);var p=a.proxyCache[c].relationalState;if(!p)throw Error("Expected new relational state for the alias "+r+" and the id "+c);this.extendStateObject({aliasPath:n,originalAliasPath:e.originalAliasPath,state:d,newState:p,mergeStrategy:e.mergeStrategy,parentProxy:i.proxyCache[c].proxy})}},r.addIdToLastEntryInAliasPath=function(e){var t=[].concat(e.aliasPath);return t[t.length-1]=Pt({aliasPathEntry:t[t.length-1],id:e.id}),t},r.removeIdFromAlias=function(e){return e.replace(/\[.*\]$/,"")},r.getIdFromAlias=function(e){var t=e.match(/\[(.*)\]$/);if(t)return t[1]},t}()}(this),this.QuerySlimmer=new Ke(this),this.optimisticUpdatesOrchestrator=new re,this.transaction=function(e,n){return function(o,i){var a={createNode:[],createNodes:[],updateNode:[],updateNodes:[],dropNode:[],createEdge:[],createEdges:[],dropEdge:[],dropEdges:[],replaceEdge:[],replaceEdges:[],updateEdge:[],updateEdges:[]},u=0,s=0;function c(e){if(!a[e.type])throw Error('No operationsByType array initialized for "'+e.type+'"');a[e.type].push("createNodes"===e.type?y({},e,{position:u+=1,nodes:e.nodes.map((function(e,t){return y({},e,{position:0===t?u:u+=1})}))}):"createNode"===e.type?y({},e,{position:u+=1}):"updateNodes"===e.type?y({},e,{position:s+=1,nodes:e.nodes.map((function(e,t){return y({},e,{position:0===t?s:s+=1})}))}):"updateNode"===e.type?y({},e,{position:s+=1}):e)}var l={createNode:function(e){var t=function(e){return y({type:"createNode",operationName:"CreateNodes"},e)}(e);return c(t),t},createNodes:function(e){var t=function(e){return y({type:"createNodes",operationName:"CreateNodes"},e)}(e);return c(t),t},updateNode:function(e){var t=function(e){return y({type:"updateNode",operationName:"UpdateNodes"},e)}(e),r=n.onUpdateRequested({id:e.data.id,payload:e.data}),o=r.onUpdateSuccessful,i=r.onUpdateFailed;return c(y({},t,{onSuccess:function(e){t.onSuccess&&t.onSuccess(e),o()},onFail:function(){t.onFail&&t.onFail(),i()}})),t},updateNodes:function(e){var t=function(e){return y({type:"updateNodes",operationName:"UpdateNodes"},e)}(e),r=e.nodes.map((function(e){return n.onUpdateRequested({id:e.data.id,payload:e.data})}));return c(y({},t,{nodes:t.nodes.map((function(e,t){return y({},e,{onSuccess:function(n){e.onSuccess&&e.onSuccess(n),r[t].onUpdateSuccessful()},onFail:function(){e.onFail&&e.onFail(),r[t].onUpdateFailed()}})}))})),t},dropNode:function(e){var t=function(e){return y({type:"dropNode",operationName:"DropNode"},e)}(e);return c(t),t},createEdge:function(e){var t=y({type:"createEdge"},e,{operationName:"AttachEdge"});return c(t),t},createEdges:function(e){var t={type:"createEdges",operationName:"AttachEdge",edges:e};return c(t),t},dropEdge:function(e){var t=y({type:"dropEdge",operationName:"DropEdge"},e);return c(t),t},dropEdges:function(e){var t={type:"dropEdges",operationName:"DropEdge",edges:e};return c(t),t},updateEdge:function(e){var t=y({type:"updateEdge",operationName:"UpdateEdge"},e);return c(t),t},updateEdges:function(e){var t={type:"updateEdges",operationName:"UpdateEdge",edges:e};return c(t),t},replaceEdge:function(e){var t=y({type:"replaceEdge",operationName:"ReplaceEdge"},e);return c(t),t},replaceEdges:function(e){var t={type:"replaceEdges",operationName:"ReplaceEdge",edges:e};return c(t),t}};function d(e){return t.sortBy(e,(function(e){return e.position}))}function p(e){return[].concat(function(e){if(!e.length)return[];var t=e.flatMap((function(e){if("createNode"===e.type)return e;if("createNodes"===e.type)return e.nodes;throw Error('Operation not recognized: "'+e+'"')})),n=We(e,"CreateNodes");return[r.gql(Ze||(Ze=R(["\n      mutation "," {\n        CreateNodes(\n          createOptions: [\n            ","\n          ]\n          transactional: true\n        ) {\n          id\n        }\n      }\n    "])),n,t.map(ut).join("\n"))]}(d([].concat(e.createNode,e.createNodes))),function(e){if(!e.length)return[];var t=e.flatMap((function(e){if("updateNode"===e.type)return e.data;if("updateNodes"===e.type)return e.nodes.map((function(e){return e.data}));throw Error('Operation not recognized: "'+e+'"')})),n=We(e,"UpdateNodes"),o=t.reduce((function(e,t){var n=function e(t){return Object.entries(t).reduce((function(t,r){var n=r[0],o=r[1];return null==o?t.push(n):Array.isArray(o)||"object"!=typeof o||t.push.apply(t,e(o).map((function(e){return n+"__dot__"+e}))),t}),[])}(t);return n.length&&e.push(r.gql(et||(et=R(['\n        mutation {\n          DropProperties(\n            nodeIds: ["','"]\n            propertyNames: [',"]\n            transactional: true\n          )\n          { \n            id\n          }\n      }\n      "])),t.id,n.map((function(e){return'"'+e+'__dot__*"'})).join(","))),e}),[]);return[r.gql(tt||(tt=R(["\n        mutation "," {\n          UpdateNodes(\n            nodes: [\n              ","\n            ]\n            transactional: true\n          ) {\n            id\n          }\n        }\n      "])),n,t.map(st).join("\n"))].concat(o)}(d([].concat(e.updateNode,e.updateNodes))),function(e){return e.length?e.map((function(e){if("dropNode"===e.type)return e;throw Error('Operation not recognized: "'+e+'"')})).map((function(e){var t=We([e],"DropNode");return r.gql(rt||(rt=R(["\n      mutation ",' {\n        DropNode(nodeId: "','", transactional: true)\n      }    \n    '])),t,e.id)})):[]}([].concat(e.dropNode)),function(e){return e.flatMap((function(e){if("createEdge"===e.type)return ze(y({},e.edge,{name:e.name}));if("createEdges"===e.type)return e.edges.map((function(e){return ze(e.edge)}));throw Error('Operation not recognized: "'+e+'"')}))}([].concat(e.createEdge,e.createEdges)),function(e){return e.flatMap((function(e){if("dropEdge"===e.type)return He(y({},e.edge,{name:e.name}));if("dropEdges"===e.type)return e.edges.map((function(e){return He(y({},e.edge,{name:e.name}))}));throw Error('Operation not recognized: "'+e+'"')}))}([].concat(e.dropEdge,e.dropEdges)),function(e){return e.flatMap((function(e){if("replaceEdge"===e.type)return $e(y({},e.edge,{name:e.name}));if("replaceEdges"===e.type)return e.edges.map((function(e){return $e(e.edge)}));throw Error('Operation not recognized: "'+e+'"')}))}([].concat(e.replaceEdge,e.replaceEdges)),function(e){return e.flatMap((function(e){if("updateEdge"===e.type)return Xe(y({},e.edge,{name:e.name}));if("updateEdges"===e.type)return e.edges.map((function(e){return Xe(e.edge)}));throw Error('Operation not recognized: "'+e+'"')}))}([].concat(e.updateEdge,e.updateEdges)))}var h=e.getToken({tokenName:(null==i?void 0:i.tokenName)||"default"});function g(e){var r=Object.entries(e).reduce((function(e,t){return t[1].forEach((function(t){e[t.operationName]=e.hasOwnProperty(t.operationName)?[].concat(e[t.operationName],[t]):[t]})),e}),{});return Object.entries(r).forEach((function(e){r[e[0]]=t.sortBy(e[1],(function(e){return e.position}))})),r}if(Array.isArray(o))return function(t){var r=t.filter((function(e){return e.callbackResult instanceof Promise})).map((function(e){return e.callbackResult}));function n(){return(n=f(ne.mark((function n(){var o,i;return ne.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.every((function(e){return e.token===t[0].token}))){n.next=4;break}throw new Error("transactionGroup - All grouped transactions must use the same authentication token.");case 4:if(!r.length){n.next=7;break}return n.next=7,Promise.all(r);case 7:return o=t.map((function(t){return e.gqlClient.mutate({mutations:p(t.operations),token:h})})),n.next=10,Promise.all(o);case 10:return(i=n.sent)&&i.forEach((function(e,r){b({executionResult:e,operationsByType:t[r].operations})})),n.abrupt("return",i.flat());case 15:throw n.prev=15,n.t0=n.catch(0),n.t0;case 18:case"end":return n.stop()}}),n,null,[[0,15]])})))).apply(this,arguments)}return{operations:a,execute:function(){return n.apply(this,arguments)},token:h}}(o);var v=o(l);function m(e){var t=g(e.operationsByType);Object.entries(t).forEach((function(e){var t=e[0];e[1].forEach((function(e){"CreateNodes"!==t&&"UpdateNodes"!==t||(e.hasOwnProperty("nodes")?e.nodes.forEach((function(e){e.hasOwnProperty("onFail")&&e.onFail()})):e.hasOwnProperty("onFail")&&e.onFail())}))}))}function b(e){var t=e.executionResult,r=g(e.operationsByType);!function e(t){t.forEach((function(t){if(Array.isArray(t))e(t);else{var n=t.data;Object.entries(r).forEach((function(e){var t=e[0],r=e[1];n.hasOwnProperty(t)&&r.forEach((function(e){if("CreateNodes"===t||"UpdateNodes"===t){var r=n[t];e.hasOwnProperty("nodes")?e.nodes.forEach((function(e){e.hasOwnProperty("onSuccess")&&e.onSuccess(r[e.position-1])})):e.hasOwnProperty("onSuccess")&&e.onSuccess(r[e.position-1])}}))}))}}))}(t),Object.entries(r).forEach((function(e){var t=e[0];"CreateNodes"!==t&&"UpdateNodes"!==t&&e[1].forEach((function(e){e.hasOwnProperty("onSuccess")?e.onSuccess():e.hasOwnProperty("edges")&&e.edges.forEach((function(e){e.hasOwnProperty("onSuccess")&&e.onSuccess()}))}))}))}function E(){return(E=f(ne.mark((function t(){var r,n;return ne.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"function"!=typeof o){t.next=5;break}if(!(v instanceof Promise)){t.next=5;break}return t.next=5,v;case 5:return r=p(a),t.next=8,e.gqlClient.mutate({mutations:r,token:h});case 8:return(n=t.sent)&&b({executionResult:n,operationsByType:a}),t.abrupt("return",n);case 13:throw t.prev=13,t.t0=t.catch(0),m({operationsByType:a}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}return{operations:a,execute:function(){return E.apply(this,arguments)},callbackResult:v,token:h}}}(this,{onUpdateRequested:this.optimisticUpdatesOrchestrator.onUpdateRequested}),e.generateMockData&&e.paginationFilteringSortingInstance===exports.EPaginationFilteringSortingInstance.SERVER)throw Error('mmGQL was told to generate mock data and use "SERVER" pagination/filtering/sorting. Switch paginationFilteringSortingInstance to "CLIENT"')}var n=e.prototype;return n.def=function(e){if(e.type.includes("-")||e.type.includes("."))throw new Error("Node types cannot include hyphens or dots");var t=Object.keys(e.properties).find((function(e){return Object.keys(H).includes(e)}));if(t)throw new T({propName:t});var r,n=this.addDefaultNodeProperties(e.properties),o=y({},e,{properties:n}),i=this.DOFactory(o);return{_isNodeDef:!0,do:i,repository:(r={def:o,DOClass:i,onDOConstructed:this.optimisticUpdatesOrchestrator.onDOConstructed,onDODeleted:this.optimisticUpdatesOrchestrator.onDODeleted,onDataReceived:this.optimisticUpdatesOrchestrator.onPersistedDataReceived},new(function(){function e(){this.cached={}}var t=e.prototype;return t.onDataReceived=function(e){if(r.def.type!==e.type)throw Error("Attempted to query a node with an id belonging to a different type - Expected: "+r.def.type+" Received: "+e.type);var t=this.cached[e.id],n=this.parseDataFromBackend(e);if(!t){var o=new r.DOClass(n);this.cached[e.id]=o,r.onDOConstructed&&r.onDOConstructed(o)}r.onDataReceived({data:n,applyUpdateToDO:function(){t&&t.onDataReceived(n)}})},t.byId=function(e){var t=this.cached[e];if(!t)throw new j({nodeType:r.def.type,id:e});return t},t.onNodeDeleted=function(e){this.cached[e]&&(r.onDODeleted&&r.onDODeleted(this.cached[e]),delete this.cached[e])},t.parseDataFromBackend=function(e){var t=this,n={};return Object.keys(e).reduce((function(o,i){var a,u;if(Object.keys(z).includes(i))return y({},o,((u={})[i]=e[i],u));if(!(i.includes("__dot__")?Object.keys(r.def.properties).includes(i.split("__dot__")[0]):Object.keys(r.def.properties).includes(i)))return o;var s=null==(a=r.def.properties[i])?void 0:a.type,c=i.includes("__dot__")||s===exports.DATA_TYPES.object||s===exports.DATA_TYPES.maybeObject,l=s===exports.DATA_TYPES.record||s===exports.DATA_TYPES.maybeRecord,d=function(){if(c)return!1;var e=r.def.properties[i],t="function"==typeof e?e._default.type:e.type;return t===exports.DATA_TYPES.array||t===exports.DATA_TYPES.maybeArray}();if(c){var p=i.split("__dot__"),f=p[0],h=p.slice(1);if("__NULL__"===e[f]||null===e[f])return o[f]=null,o;if("string"==typeof e[f]&&e[f].startsWith("__JSON__"))try{n[f]=n[f]||$(e[f])}catch(t){throw new L({receivedData:e,message:'Could not parse json stored in old format for an object in the key "'+i+'"'})}return n[f]?(o[f]=o[f]||t.getOnlyQueriedData({allDataReceived:e,dataPreviouslyParsedForThisObject:n[f],rootProp:f}),o):(null==o[f]&&(o[f]={}),t.nest({nests:h,root:o[f],val:"__object__"===e[i]?{}:e[i]}),o)}if(l){if("string"==typeof e[i]&&e[i].startsWith("__JSON__"))o[i]=$(e[i]);else{if(null!=e[i])throw new L({receivedData:e,message:'Could not parse json stored in old format for a record in the key "'+i+'"'});o[i]=null}return o}return d?(o[i]=X(e[i]),o):(o[i]=e[i],o)}),{})},t.getOnlyQueriedData=function(e){var t=this;return Object.keys(e.allDataReceived).filter((function(t){return t.startsWith(e.rootProp+"__dot__")})).reduce((function(r,n){var o,i=n.split("__dot__"),a=i[0],u=i.slice(1);return t.nest({nests:u,root:r,val:t.getDataForProp({prop:n,object:(o={},o[a]=e.dataPreviouslyParsedForThisObject,o)})}),r}),{})},t.getDataForProp=function(e){if(null!=e.object){if(e.prop.includes("__dot__")){var t=e.prop.split("__dot__"),r=t[0],n=t.slice(1);return this.getDataForProp({object:e.object[r],prop:n.join("__dot__")})}return e.object[e.prop]}},t.nest=function(e){var t="__NULL__"===e.val?null:X(e.val);if(0===e.nests.length)e.root=t;else if(1===e.nests.length)e.root[e.nests[0]]=t;else{var r=e.nests,n=r[0],o=r.slice(1);null==e.root[n]?e.root[n]=null:this.nest({nests:o,root:e.root[n],val:t})}},e}())),type:e.type,data:n,computed:e.computed,relational:e.relational,generateMockData:e.generateMockData}},n.defTyped=function(e){return this.def(e)},n.getToken=function(e){return this.tokens[e.tokenName]},n.setToken=function(e){this.tokens[e.tokenName]=e.token},n.clearTokens=function(){this.tokens={}},n.addDefaultNodeProperties=function(e){return y({},e,H)},e}();Object.defineProperty(exports,"gql",{enumerable:!0,get:function(){return d.gql}}),exports.DEFAULT_NODE_PROPERTIES=H,exports.DEFAULT_PAGE_SIZE=10,exports.DEFAULT_TOKEN_NAME="default",exports.Data=B,exports.LoggingContext=lt,exports.MMGQL=xt,exports.MMGQLContext=ct,exports.MMGQLProvider=function(e){if(i.useContext(ct))throw Error("Another instance of an MMGQLProvider was already detected higher up the render tree.\nHaving multiple instances of MMGQLProviders is not supported and may lead to unexpected results.");var t=i.useRef({}),r=i.useRef({}),n=i.useRef({}),o=i.useCallback((function(e,r){t.current[e]=y({},t.current[e],r)}),[]),a=i.useCallback((function(n){function o(){var e=t.current[n];e&&(e.unsub&&e.unsub(),delete t.current[n])}null!=e.subscriptionTTLMs?r.current[n]=setTimeout(o,e.subscriptionTTLMs):o()}),[e.subscriptionTTLMs]),u=i.useCallback((function(e){clearTimeout(r.current[e]),delete r.current[e]}),[]),s=i.useCallback((function(e,t){if(n.current[e]&&!t.silenceDuplicateSubIdErrors)throw Error(["A useSubscription hook was already mounted using the following subscription id:",e,"To fix this error, please specify a unique subscriptionId in the second argument of useSubscription","useSubscription(queryDefinitions, { subscriptionId })"].join("\n"));n.current[e]=!0}),[]),c=i.useCallback((function(e){delete n.current[e]}),[]);return i.createElement(ct.Provider,{value:{mmGQLInstance:e.mmGQL,ongoingSubscriptionRecord:t.current,updateSubscriptionInfo:o,scheduleCleanup:a,cancelCleanup:u,onHookMount:s,onHookUnmount:c}},e.children)},exports.NODES_PROPERTY_KEY="nodes",exports.NodesCollection=ie,exports.OBJECT_IDENTIFIER="__object__",exports.OBJECT_PROPERTY_SEPARATOR="__dot__",exports.PAGE_INFO_PROPERTY_KEY="pageInfo",exports.PROPERTIES_QUERIED_FOR_ALL_NODES=z,exports.RELATIONAL_UNION_QUERY_SEPARATOR="__rU__",exports.TOTAL_COUNT_PROPERTY_KEY="totalCount",exports.UnsafeNoDuplicateSubIdErrorProvider=function(e){return i.createElement(lt.Provider,{value:{unsafe__silenceDuplicateSubIdErrors:!0}},e.children)},exports.array=function(e){var t="function"==typeof e?e._default:e;function r(e){return new B({type:exports.DATA_TYPES.array,parser:function(e){return e},boxedValue:t,defaultValue:e,isOptional:!1})}return r.optional=new B({type:exports.DATA_TYPES.maybeArray,parser:function(e){return e},boxedValue:t,isOptional:!0}),r._default=r([]),r},exports.boolean=K,exports.chance=me,exports.chunkArray=ae,exports.generateRandomBoolean=Ee,exports.generateRandomId=Re,exports.generateRandomNumber=Se,exports.generateRandomString=be,exports.getDefaultConfig=function(){var e={querySlimming:!1,gqlClientQueries:!1,gqlClientMutations:!1,gqlClientSubscriptions:!1};return{gqlClient:pt({httpUrl:"http://bloom-app-loadbalancer-dev-524448015.us-west-2.elb.amazonaws.com/graphql/",wsUrl:"ws://bloom-app-loadbalancer-dev-524448015.us-west-2.elb.amazonaws.com/graphql/",logging:e}),generateMockData:!1,enableQuerySlimming:!1,paginationFilteringSortingInstance:exports.EPaginationFilteringSortingInstance.SERVER,logging:e}},exports.getGQLCLient=pt,exports.number=Y,exports.object=W,exports.oneToMany=function(e){return function(t){return{def:e,_relationshipName:t._relationshipName,_relational:exports.RELATIONAL_TYPES.oneToMany,filter:t.filter,queryBuilderOpts:t}}},exports.oneToOne=function(e){return function(t){return{def:e,_relationshipName:t._relationshipName,_relational:exports.RELATIONAL_TYPES.oneToOne,queryBuilderOpts:t}}},exports.queryDefinition=function(e){return e},exports.record=J,exports.string=V,exports.stringEnum=G,exports.useSubscription=function e(t,r){var n=i.useContext(ct);if(!n)throw Error("You must wrap your app with an MMGQLProvider before using useSubscription.");var o={stack:""};if(Error.captureStackTrace(o,e),""===o.stack)throw Error("Error.captureStackTrace not supported");var a=(null==r?void 0:r.subscriptionId)||o.stack.split("\n")[1],u=function(e){var t=e.context.ongoingSubscriptionRecord[e.subscriptionId];return{results:(null==t?void 0:t.results)||Object.keys(e.queryDefinitions).reduce((function(e,t){return e[t]=null,e}),{}),error:null==t?void 0:t.error,querying:null==(null==t?void 0:t.querying)||t.querying}}({subscriptionId:a,context:n,queryDefinitions:t}),s=i.useState(u.results),c=s[0],l=s[1],d=i.useState(u.error),p=d[0],f=d[1],h=i.useState(u.querying),g=h[0],v=h[1],m=i.useContext(lt),b=null,E=null;try{b=function(e){var t=e.subscriptionId;e.context.ongoingSubscriptionRecord[t]||(e.context.ongoingSubscriptionRecord[t]={}),e.context.updateSubscriptionInfo(t,{onResults:e.handlers.onResults,onError:e.handlers.onError,setQuerying:e.handlers.setQuerying});var r,n=function(e){var t;return Object.entries(e).reduce((function(e,t){var r,n=t[1];return e[n&&"useSubOpts"in n&&null!=(null==(r=n.useSubOpts)?void 0:r.doNotSuspend)&&n.useSubOpts.doNotSuspend?dt.suspendDisabled:dt.suspendEnabled][t[0]]=n,e}),((t={})[dt.suspendEnabled]={},t[dt.suspendDisabled]={},t))}(e.queryDefinitions),o=n.suspendDisabled,i=n.suspendEnabled,a=Object.values(dt).map((function(e){return t+e}));function u(){return a.map((function(t){return e.context.ongoingSubscriptionRecord[t]}))}function s(t){var r,n=t.queryDefinitions,o=t.parentSubscriptionId,i=t.suspend,a=o+t.subscriptionSuffix,s=e.context.ongoingSubscriptionRecord[a],c=null;if(s){if(!s.onQueryDefinitionsUpdated)throw Error("onQueryDefinitionsUpdated is not defined");return s.onQueryDefinitionsUpdated(t.queryDefinitions),s.suspendPromise}function l(r){var n=e.context.ongoingSubscriptionRecord[o],i=null==n?void 0:n.onError;i?(i(r),e.context.updateSubscriptionInfo(t.parentSubscriptionId,{error:r})):console.error("onError is not defined")}e.context.ongoingSubscriptionRecord[a]={onQueryDefinitionsUpdated:function(e){c=e}},e.context.updateSubscriptionInfo(a,{querying:!0}),e.context.updateSubscriptionInfo(o,{querying:!0}),null==(r=e.context.ongoingSubscriptionRecord[o])||null==r.setQuerying||r.setQuerying(!0);var d=e.context.mmGQLInstance.subscribe(n,{onQueryManagerQueryStateChange:function(t){var r,n=null==(r=e.context.ongoingSubscriptionRecord[o])?void 0:r.lastQueryIdx;if(t.queryState===exports.QueryState.LOADING){var i;if(0===t.queryIdx)return;e.context.updateSubscriptionInfo(a,{querying:!0}),e.context.updateSubscriptionInfo(o,{querying:!0,lastQueryIdx:t.queryIdx}),null==(i=e.context.ongoingSubscriptionRecord[o])||null==i.setQuerying||i.setQuerying(!0)}else if(t.queryState===exports.QueryState.IDLE){if(t.queryIdx===n){var u=e.context.ongoingSubscriptionRecord[o],s=null==u?void 0:u.setQuerying;if(!s)return void l(Error("setQuerying is not defined"));e.context.updateSubscriptionInfo(o,{querying:!1}),s(!1)}}else{if(t.queryState!==exports.QueryState.ERROR)throw new U(t.queryState);l(t.error)}},batchKey:t.suspend?"suspended":"non-suspended",onData:function(r){var n=r.results,i=e.context.ongoingSubscriptionRecord[o],a=null==i?void 0:i.onResults;a?(a(y({},i.results,n)),e.context.updateSubscriptionInfo(t.parentSubscriptionId,{results:y({},i.results,n)})):l(Error("onResults is not defined"))},onError:l,onSubscriptionInitialized:function(t){e.context.updateSubscriptionInfo(a,{unsub:function(){return t()}}),e.context.updateSubscriptionInfo(o,{unsub:function(){u().forEach((function(e){return(null==e?void 0:e.unsub)&&e.unsub()}))}})}}).then((function(t){return c&&t.onQueryDefinitionsUpdated(c).catch(l),e.context.updateSubscriptionInfo(a,{onQueryDefinitionsUpdated:function(e){t.onQueryDefinitionsUpdated(e).catch(l)}}),t})).finally((function(){if(e.context.updateSubscriptionInfo(a,{suspendPromise:void 0,querying:!1}),!u().some((function(e){return e&&e.querying}))){var t=e.context.ongoingSubscriptionRecord[o],r=null==t?void 0:t.setQuerying;if(!r)return void l(Error("setQuerying is not defined"));e.context.updateSubscriptionInfo(o,{querying:!1}),r(!1)}}));if(!s&&i)return e.context.updateSubscriptionInfo(a,{suspendPromise:d}),d}if(e.data.error)throw e.data.error;if(Object.keys(o).length)try{s({queryDefinitions:o,parentSubscriptionId:t,subscriptionSuffix:dt.suspendDisabled,suspend:!1})}catch(t){throw e.handlers.onError(t),t}if(Object.keys(i).length)try{r=s({queryDefinitions:i,parentSubscriptionId:t,subscriptionSuffix:dt.suspendEnabled,suspend:!0})}catch(t){throw e.handlers.onError(t),t}if(r)throw r;return{data:e.data.results,error:e.data.error,querying:e.data.querying,onHookUnmount:function(){e.context.onHookUnmount(t),e.context.scheduleCleanup(t),a.forEach((function(t){return e.context.scheduleCleanup(t)}))},onHookMount:function(){e.context.onHookMount(t,{silenceDuplicateSubIdErrors:e.silenceDuplicateSubIdErrors}),e.context.cancelCleanup(t),a.forEach((function(t){return e.context.cancelCleanup(t)}))}}}({context:n,subscriptionId:a,queryDefinitions:t,data:{results:c,error:p,querying:g},handlers:{onResults:l,onError:f,setQuerying:v},silenceDuplicateSubIdErrors:m.unsafe__silenceDuplicateSubIdErrors,useServerSidePaginationFilteringSorting:n.mmGQLInstance.paginationFilteringSortingInstance===exports.EPaginationFilteringSortingInstance.SERVER})}catch(e){E=e,b=null}if(i.useEffect((function(){var e;return null==(e=b)||e.onHookMount(),function(){var e;null==(e=b)||e.onHookUnmount()}}),[n,a]),p||E)throw p||E;return b};
//# sourceMappingURL=sm-js.cjs.production.min.js.map
